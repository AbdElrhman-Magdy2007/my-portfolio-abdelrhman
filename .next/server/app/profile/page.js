"use strict";(()=>{var e={};e.id=636,e.ids=[636],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{e.exports=require("bcrypt")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},12412:e=>{e.exports=require("assert")},14926:(e,r,a)=>{a.r(r),a.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>m,routeModule:()=>p,tree:()=>l});var s=a(65239),t=a(48088),i=a(88170),o=a.n(i),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(r,d);let l={children:["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,75758)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,54413)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,m=["C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\profile\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},18618:(e,r,a)=>{a.d(r,{A:()=>o});var s=a(61120),t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,r)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:l="",children:m,...u},p)=>(0,s.createElement)("svg",{ref:p,...t,width:o,height:o,stroke:a,strokeWidth:d?24*Number(n)/Number(o):n,className:["lucide",`lucide-${i(e)}`,l].join(" "),...u},[...r.map(([e,r])=>(0,s.createElement)(e,r)),...Array.isArray(m)?m:[m]]));return a.displayName=`${e}`,a}},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22389:(e,r,a)=>{a.d(r,{i:()=>f,$:()=>h});var s=a(67218);a(79130);var t=a(31183),i=a(5486),o=a.n(i),n=a(58111),d=a(62351),l=a(84113),m=a(45697);let u={requiredEmail:"Email is required",validEmail:"Invalid email format",requiredPassword:"Password is required",passwordMinLength:"Password must be at least 6 characters",passwordMaxLength:"Password must be less than 40 characters",requiredName:"Name is required",nameMaxLength:"Name must be less than 50 characters",requiredConfirmPassword:"Password confirmation is required",passwordsDoNotMatch:"Passwords do not match",validLimit:"Limit must be a positive integer",limitMax:"Limit must be 100 or less"},p=e=>({isValid:e.password===e.confirmPassword,issue:{message:u.passwordsDoNotMatch,path:["confirmPassword"]}}),c=()=>m.z.object({email:m.z.string().trim().min(1,{message:u.requiredEmail}).email({message:u.validEmail}).transform(e=>e.toLowerCase()),password:m.z.string().min(1,{message:u.requiredPassword}).min(6,{message:u.passwordMinLength}).max(40,{message:u.passwordMaxLength})}),x=()=>m.z.object({name:m.z.string().trim().min(1,{message:u.requiredName}).max(50,{message:u.nameMaxLength}),email:m.z.string().trim().min(1,{message:u.requiredEmail}).email({message:u.validEmail}).transform(e=>e.toLowerCase()),password:m.z.string().min(1,{message:u.requiredPassword}).min(6,{message:u.passwordMinLength}).max(40,{message:u.passwordMaxLength}),confirmPassword:m.z.string().min(1,{message:u.requiredConfirmPassword}),limit:m.z.number().int().min(1,{message:u.validLimit}).max(100,{message:u.limitMax}).default(1)}).refine(e=>p(e).isValid,e=>p(e).issue);var g=a(17478);let f=async(e,r)=>{if(!e?.email||!e?.password)return{status:400,message:"Email and password are required",className:"text-red-500"};let a=c().safeParse(e);if(!a.success)return{status:400,error:a.error.formErrors.fieldErrors,className:"text-red-500"};try{let e=await t.z.user.findUnique({where:{email:a.data.email},select:{id:!0,email:!0,name:!0,password:!0,role:!0,createdAt:!0,updatedAt:!0}});if(!e)return{status:401,message:"User not found",className:"text-red-500"};if(!await o().compare(a.data.password,e.password))return{status:401,message:"Incorrect password",className:"text-red-500"};let{password:r,...s}=e;return{status:200,message:"Login successful",user:s,className:"text-green-500"}}catch(e){return console.error("❌ Login Error:",{error:e instanceof Error?e.message:String(e),timestamp:new Date().toISOString()}),{status:500,message:"An unexpected error occurred",error:e instanceof Error?e.message:"Unknown error",className:"text-red-500"}}},h=async(e,r)=>{let a=Object.fromEntries(r.entries()),s=x().safeParse(a);if(!s.success)return{status:400,error:s.error.formErrors.fieldErrors,formData:r,className:"text-red-500"};try{if(await t.z.user.findUnique({where:{email:s.data.email},select:{id:!0}}))return{status:409,message:"User already exists",formData:r,className:"text-red-500"};let e=await o().hash(s.data.password,10),a=await t.z.user.create({data:{id:(0,l.A)(),name:s.data.name,email:s.data.email,password:e,role:"USER"},select:{id:!0,name:!0,email:!0,role:!0}}),i=`/${n.BV.ADMIN}`;return(0,d.revalidatePath)(`${i}/${n.bQ.USERS}/${a.id}/${n.bQ.EDIT}`),(0,d.revalidatePath)(`${i}/${n.bQ.USERS}`),{status:201,message:"Registration successful",user:a,className:"text-green-500"}}catch(e){return console.error("❌ Signup Error:",{error:e instanceof Error?e.message:String(e),timestamp:new Date().toISOString()}),{status:500,message:"An unexpected error occurred",error:e instanceof Error?e.message:"Unknown error",className:"text-red-500"}}};(0,g.D)([f,h]),(0,s.A)(f,"7f9eac56ed23c30b7351cd28b20cd87830a680a1ae",null),(0,s.A)(h,"7f5f03af2f446e4a361db5471f0061656f7668a4f4",null)},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31183:(e,r,a)=>{a.d(r,{z:()=>t});var s=a(96330);let t=global.prisma||new s.PrismaClient},33169:(e,r,a)=>{a.d(r,{N:()=>d});var s=a(58111),t=a(13581),i=a(60890),o=a(31183),n=a(22389);let d={adapter:(0,i.y)(o.z),providers:[(0,t.A)({name:"Credentials",credentials:{email:{label:"Email",type:"email",placeholder:"example@email.com"},password:{label:"Password",type:"password"}},async authorize(e,r){if(!e)throw Error("No credentials provided");let a=await (0,n.i)(e,s.AT.ENGLISH);if(200===a.status&&a.user)return a.user;throw Error(JSON.stringify({validationError:a.error,responseError:a.message}))}})],callbacks:{async jwt({token:e}){if(!e.email)return e;let r=await o.z.user.findUnique({where:{email:e.email}});return r?{id:r.id,name:r.name,email:r.email,role:r.role,image:r.image,phone:r.phone,country:r.country,city:r.city,postalCode:r.postalCode,streetAddress:r.streetAddress}:e},session:({session:e,token:r})=>(r&&(e.user={...e.user,id:r.id,name:r.name,email:r.email,role:r.role,image:r.image,phone:r.phone,country:r.country,city:r.city,postalCode:r.postalCode,streetAddress:r.streetAddress}),e)},session:{strategy:"jwt",maxAge:604800,updateAge:86400},pages:{signIn:`/${s.BV.AUTH}/${s.bQ.LOGIN}`},secret:process.env.NEXTAUTH_SECRET,debug:"production"===s.B5.DEV}},33873:e=>{e.exports=require("path")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},58111:(e,r,a)=>{a.d(r,{AT:()=>s,B5:()=>o,BV:()=>t,bQ:()=>i});var s=function(e){return e.ENGLISH="en",e.ARABIC="ar",e}({}),t=function(e){return e.ROOT="",e.MENU="menu",e.ABOUT="about",e.CONTACT="contact",e.AUTH="auth",e.CART="cart",e.PROFILE="profile",e.ADMIN="admin",e.PORTFOLIO="PORTFOLIO",e.SETTINGS="SETTINGS",e}({}),i=function(e){return e.LOGIN="/signin",e.Register="/signup",e.FORGOT_PASSWORD="forgot-password",e.CATEGORIES="categories",e.MENU_ITEMS="menu-items",e.USERS="users",e.ORDERS="orders",e.NEW="new",e.EDIT="edit",e.DASHBOARD="Dashboard",e.CUSTOMERS="Customers",e.SALES="Sales",e.PRODUCTS="PRODUCTS",e.LOGOUT="LOGOUT",e}({}),o=function(e){return e.PROD="production",e.DEV="development",e}({})},59194:(e,r,a)=>{a.r(r),a.d(r,{"7f5f03af2f446e4a361db5471f0061656f7668a4f4":()=>s.$,"7f9eac56ed23c30b7351cd28b20cd87830a680a1ae":()=>s.i});var s=a(22389)},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65867:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(18618).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},74075:e=>{e.exports=require("zlib")},75758:(e,r,a)=>{a.r(r),a.d(r,{default:()=>p});var s=a(37413),t=a(58111),i=a(19854),o=a(39916),n=a(61120),d=a(65867),l=a(33169),m=a(86384),u=a(96330);async function p(){let e=await (0,i.getServerSession)(l.N);return e||(0,o.redirect)(`/${t.BV.AUTH}/${t.bQ.LOGIN}`),e.user.role===u.UserRole.ADMIN&&(0,o.redirect)(`/${t.BV.ADMIN}`),(0,s.jsxs)("main",{className:"relative min-h-screen bg-background transition-colors duration-300 overflow-hidden",children:[(0,s.jsx)("div",{className:"particle-wave",children:[...Array(12)].map((e,r)=>(0,s.jsx)("div",{className:"particle",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`,width:`${6*Math.random()+3}px`,height:`${6*Math.random()+3}px`,animationDuration:`${4*Math.random()+2}s`,animationDelay:`${3*Math.random()}s`}},r))}),(0,s.jsx)("section",{className:"py-16 lg:py-24 relative z-10",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("header",{className:"mb-12 text-center",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-heading font-bold text-gradient-primary animate-reveal-text tracking-tight","aria-labelledby":"profile-title",children:"Your Profile"}),(0,s.jsx)("p",{className:"mt-4 text-lg md:text-xl text-muted-foreground animate-reveal-text delay-200",children:"Manage your account details with ease"})]}),(0,s.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,s.jsx)("div",{className:"card glass-card animate-reveal-text delay-400 p-8",children:(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,s.jsx)(d.A,{className:"w-12 h-12 animate-spin text-primary","aria-hidden":"true"})}),children:e.user?(0,s.jsx)(m.default,{user:e.user}):(0,s.jsx)("p",{className:"text-center text-destructive font-medium",role:"alert",children:"Unable to load user data. Please try again."})})})})]})})]})}},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},81630:e=>{e.exports=require("http")},94735:e=>{e.exports=require("events")},96330:e=>{e.exports=require("@prisma/client")}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[243,915,78,172,596,24,984,357,423,540],()=>a(14926));module.exports=s})();