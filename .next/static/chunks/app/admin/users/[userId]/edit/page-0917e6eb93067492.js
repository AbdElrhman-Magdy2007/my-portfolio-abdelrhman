(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698,3937,6636],{6654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return r}});let l=a(12115);function r(e,t){let a=(0,l.useRef)(null),r=(0,l.useRef)(null);return(0,l.useCallback)(l=>{if(null===l){let e=a.current;e&&(a.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(a.current=n(e,l)),t&&(r.current=n(t,l))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},18112:(e,t,a)=>{Promise.resolve().then(a.bind(a,37447))},34477:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{callServer:function(){return l.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return r.findSourceMapURL}});let l=a(53806),r=a(31818),n=a(34979).createServerReference},37447:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var l=a(95155),r=a(53607),n=a(77052),i=a(66766),o=a(30285),s=a(12115),u=a(34477);let d=(0,u.createServerReference)("7f642c5e6f9d0df15461240c9981e17885ae03ee6d",u.callServer,void 0,u.findSourceMapURL,"updateProfile");var c=a(94631),f=a(84355),m=a(56671),p=a(12108),g=a(28798),b=a(76981),v=a(58918),y=a(52596),h=function(e){return e.USER="USER",e.ADMIN="ADMIN",e}(h||{});let x=function(e){var t,a;let{user:u}=e,{data:f,update:h}=(0,p.useSession)(),[x,S]=(0,s.useState)(null!=(t=u.image)?t:""),[N,A]=(0,s.useState)("ADMIN"===u.role),[R,w]=(0,s.useState)(null),[k,P]=(0,s.useState)([]),_=(0,s.useCallback)(()=>{let e=new FormData;return Object.entries(u).forEach(t=>{let[a,l]=t;null!=l&&"image"!==a&&e.append(a,l.toString())}),e},[u]),M={message:"",error:{},status:null,formData:_()},[O,C,D]=(0,s.useActionState)(d.bind(null,N),M),{getFormFields:E}=(0,n.A)({slug:r.BV.PROFILE});(0,s.useEffect)(()=>{if(O.message&&"number"==typeof O.status&&!D&&O.message!==R){m.oR.dismiss("profile-update-loading");let e=200===O.status;m.oR[e?"success":"error"](O.message,{style:{color:e?"#34c759":"#ef4444",backgroundColor:e?"#f0fdf4":"#fef2f2",border:"1px solid ".concat(e?"#dcfce7":"#fee2e2"),borderRadius:"8px",padding:"12px"},duration:3e3}),w(O.message),e&&h({...f,user:{...null==f?void 0:f.user,role:N?"ADMIN":"USER",image:x}})}},[D,O.message,O.status,f,h,N,x,R]),(0,s.useEffect)(()=>{var e;S(null!=(e=u.image)?e:"")},[u.image]);let I=(0,s.useCallback)(e=>{e.preventDefault();let t="Saving...";t!==R&&(m.oR.loading(t,{id:"profile-update-loading",style:{borderRadius:"8px",padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb"}}),w(t)),(0,s.startTransition)(()=>{C(new FormData(e.currentTarget))})},[C,R]);return(0,l.jsxs)(v.P.form,{onSubmit:I,className:"flex flex-col md:flex-row gap-10 p-6 bg-black shadow-lg rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,l.jsxs)(v.P.div,{className:"group relative w-[200px] h-[200px] overflow-hidden rounded-full mx-auto border-2 border-indigo-700",whileHover:{scale:1.05},children:[x?(0,l.jsx)(i.default,{src:x,alt:null!=(a=u.name)?a:"User Avatar",width:200,height:200,className:"rounded-full object-cover"}):(0,l.jsx)(i.default,{src:"https://i.postimg.cc/kg2xytVs/610e8961bbb935274c005c6106a78a38.jpg",alt:"Default Cat Avatar",width:200,height:200,className:"rounded-full object-cover"}),(0,l.jsx)("div",{className:(0,y.A)("absolute top-0 left-0 w-full h-full flex items-center justify-center rounded-full transition-opacity duration-200",x&&"group-hover:opacity-100 opacity-0 transition-opacity duration-200"),children:(0,l.jsx)(j,{setSelectedImage:S})})]}),(0,l.jsxs)(v.P.div,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[E().map(e=>{var t,a,n,i,o,s;let u=null!=(i=null==O||null==(t=O.formData)?void 0:t.get(e.name))?i:_().get(e.name);return(0,l.jsx)(v.P.div,{className:"mb-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,l.jsx)(g.A,{...e,type:e.type,pattern:null!=(o=e.pattern)?o:"",ariaLabel:null!=(s=e.ariaLabel)?s:"",defaultValue:u,error:null==O||null==(n=O.error)||null==(a=n[e.name])?void 0:a.join(", "),readonly:e.type===r.gN.EMAIL,disabled:D})},e.name)}),(null==f?void 0:f.user.role)==="ADMIN"&&(0,l.jsxs)(v.P.div,{className:"flex items-center gap-2 my-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[(0,l.jsx)(b.Sc,{id:"admin",name:"admin",checked:N,onCheckedChange:e=>A(e),className:(0,y.A)("w-5 h-5 border-2 rounded-md transition-all",N?"bg-indigo-700 border-indigo-700":"bg-black border-black")}),(0,l.jsx)("label",{htmlFor:"admin",className:"text-indigo-700 font-medium cursor-pointer",children:"Admin"})]}),(0,l.jsx)(v.P.div,{initial:{scale:.9},animate:{scale:1},transition:{duration:.3},children:(0,l.jsx)(o.$,{type:"submit",disabled:D,className:(0,y.A)("w-full bg-indigo-700 hover:bg-indigo-700 text-black font-bold py-2 px-4 rounded-lg transition-all",D&&"opacity-50 cursor-not-allowed flex items-center justify-center gap-2"),children:D?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.A,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Saving..."})]}):"Save"})})]})]})},j=e=>{let{setSelectedImage:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"image-upload",onChange:e=>{var a;let l=null==(a=e.target.files)?void 0:a[0];l&&t(URL.createObjectURL(l))},name:"image"}),(0,l.jsx)("label",{htmlFor:"image-upload",className:"flex justify-center items-center w-full h-full cursor-pointer ml-1 rounded-full hover:bg-indigo-700/700 transition-all",children:(0,l.jsx)(f.A,{className:"w-10 h-10 text-indigo-700"})})]})}},66766:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var l=a(71469),r=a.n(l)},71469:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return s},getImageProps:function(){return o}});let l=a(88229),r=a(38883),n=a(33063),i=l._(a(51193));function o(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let s=n.Image},84355:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(72895).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,8918,6671,6217,3063,2108,5299,8441,1684,7358],()=>t(18112)),_N_E=e.O()}]);