"use strict";(()=>{var e={};e.id=698,e.ids=[698],e.modules={1132:(e,r,s)=>{s.r(r),s.d(r,{default:()=>g});var a=s(37413),t=s(19854),i=s(39916),o=s(96330),n=s(86384),d=s(58111),l=s(75986),m=s(33169);let p={LOGIN:`/auth/${d.bQ.LOGIN}?redirect=/admin`,PROFILE:`/${d.BV.PROFILE}`},u={MAIN:(0,l.A)("min-h-screen bg-background","flex flex-col items-center py-12 px-4 sm:px-6 lg:px-8","transition-colors duration-300 dark"),SECTION:(0,l.A)("w-full max-w-4xl p-6 lg:p-8","glass-card","supports-[backdrop-filter]:backdrop-blur-md"),TITLE:(0,l.A)("text-3xl lg:text-4xl font-heading font-bold text-gradient-primary animate-reveal-text","mb-8 text-center")},c=({user:e})=>(0,a.jsx)("section",{className:u.SECTION,role:"region","aria-labelledby":"admin-dashboard-title",children:(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)("h1",{id:"admin-dashboard-title",className:u.TITLE,children:"Admin Dashboard"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(n.default,{user:e})})]})});async function g(){let e;try{e=await (0,t.getServerSession)(m.N)}catch(e){console.error("Failed to fetch session:",e),(0,i.redirect)(p.LOGIN)}return e?.user||(0,i.redirect)(p.LOGIN),e.user.role!==o.UserRole.ADMIN&&(0,i.redirect)(p.PROFILE),(0,a.jsx)("main",{className:u.MAIN,"aria-labelledby":"admin-dashboard-title",children:(0,a.jsx)(c,{user:e.user})})}},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5486:e=>{e.exports=require("bcrypt")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},12412:e=>{e.exports=require("assert")},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20047:(e,r,s)=>{s.r(r),s.d(r,{"40a4b3531ce78691a7b5100c2cc76b5387ed63c157":()=>a.default,"7f5f03af2f446e4a361db5471f0061656f7668a4f4":()=>t.$,"7f9eac56ed23c30b7351cd28b20cd87830a680a1ae":()=>t.i});var a=s(25108),t=s(22389)},22389:(e,r,s)=>{s.d(r,{i:()=>x,$:()=>h});var a=s(67218);s(79130);var t=s(31183),i=s(5486),o=s.n(i),n=s(58111),d=s(62351),l=s(84113),m=s(45697);let p={requiredEmail:"Email is required",validEmail:"Invalid email format",requiredPassword:"Password is required",passwordMinLength:"Password must be at least 6 characters",passwordMaxLength:"Password must be less than 40 characters",requiredName:"Name is required",nameMaxLength:"Name must be less than 50 characters",requiredConfirmPassword:"Password confirmation is required",passwordsDoNotMatch:"Passwords do not match",validLimit:"Limit must be a positive integer",limitMax:"Limit must be 100 or less"},u=e=>({isValid:e.password===e.confirmPassword,issue:{message:p.passwordsDoNotMatch,path:["confirmPassword"]}}),c=()=>m.z.object({email:m.z.string().trim().min(1,{message:p.requiredEmail}).email({message:p.validEmail}).transform(e=>e.toLowerCase()),password:m.z.string().min(1,{message:p.requiredPassword}).min(6,{message:p.passwordMinLength}).max(40,{message:p.passwordMaxLength})}),g=()=>m.z.object({name:m.z.string().trim().min(1,{message:p.requiredName}).max(50,{message:p.nameMaxLength}),email:m.z.string().trim().min(1,{message:p.requiredEmail}).email({message:p.validEmail}).transform(e=>e.toLowerCase()),password:m.z.string().min(1,{message:p.requiredPassword}).min(6,{message:p.passwordMinLength}).max(40,{message:p.passwordMaxLength}),confirmPassword:m.z.string().min(1,{message:p.requiredConfirmPassword}),limit:m.z.number().int().min(1,{message:p.validLimit}).max(100,{message:p.limitMax}).default(1)}).refine(e=>u(e).isValid,e=>u(e).issue);var f=s(17478);let x=async(e,r)=>{if(!e?.email||!e?.password)return{status:400,message:"Email and password are required",className:"text-red-500"};let s=c().safeParse(e);if(!s.success)return{status:400,error:s.error.formErrors.fieldErrors,className:"text-red-500"};try{let e=await t.z.user.findUnique({where:{email:s.data.email},select:{id:!0,email:!0,name:!0,password:!0,role:!0,createdAt:!0,updatedAt:!0}});if(!e)return{status:401,message:"User not found",className:"text-red-500"};if(!await o().compare(s.data.password,e.password))return{status:401,message:"Incorrect password",className:"text-red-500"};let{password:r,...a}=e;return{status:200,message:"Login successful",user:a,className:"text-green-500"}}catch(e){return console.error("❌ Login Error:",{error:e instanceof Error?e.message:String(e),timestamp:new Date().toISOString()}),{status:500,message:"An unexpected error occurred",error:e instanceof Error?e.message:"Unknown error",className:"text-red-500"}}},h=async(e,r)=>{let s=Object.fromEntries(r.entries()),a=g().safeParse(s);if(!a.success)return{status:400,error:a.error.formErrors.fieldErrors,formData:r,className:"text-red-500"};try{if(await t.z.user.findUnique({where:{email:a.data.email},select:{id:!0}}))return{status:409,message:"User already exists",formData:r,className:"text-red-500"};let e=await o().hash(a.data.password,10),s=await t.z.user.create({data:{id:(0,l.A)(),name:a.data.name,email:a.data.email,password:e,role:"USER"},select:{id:!0,name:!0,email:!0,role:!0}}),i=`/${n.BV.ADMIN}`;return(0,d.revalidatePath)(`${i}/${n.bQ.USERS}/${s.id}/${n.bQ.EDIT}`),(0,d.revalidatePath)(`${i}/${n.bQ.USERS}`),{status:201,message:"Registration successful",user:s,className:"text-green-500"}}catch(e){return console.error("❌ Signup Error:",{error:e instanceof Error?e.message:String(e),timestamp:new Date().toISOString()}),{status:500,message:"An unexpected error occurred",error:e instanceof Error?e.message:"Unknown error",className:"text-red-500"}}};(0,f.D)([x,h]),(0,a.A)(x,"7f9eac56ed23c30b7351cd28b20cd87830a680a1ae",null),(0,a.A)(h,"7f5f03af2f446e4a361db5471f0061656f7668a4f4",null)},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33169:(e,r,s)=>{s.d(r,{N:()=>d});var a=s(58111),t=s(13581),i=s(60890),o=s(31183),n=s(22389);let d={adapter:(0,i.y)(o.z),providers:[(0,t.A)({name:"Credentials",credentials:{email:{label:"Email",type:"email",placeholder:"example@email.com"},password:{label:"Password",type:"password"}},async authorize(e,r){if(!e)throw Error("No credentials provided");let s=await (0,n.i)(e,a.AT.ENGLISH);if(200===s.status&&s.user)return s.user;throw Error(JSON.stringify({validationError:s.error,responseError:s.message}))}})],callbacks:{async jwt({token:e}){if(!e.email)return e;let r=await o.z.user.findUnique({where:{email:e.email}});return r?{id:r.id,name:r.name,email:r.email,role:r.role,image:r.image,phone:r.phone,country:r.country,city:r.city,postalCode:r.postalCode,streetAddress:r.streetAddress}:e},session:({session:e,token:r})=>(r&&(e.user={...e.user,id:r.id,name:r.name,email:r.email,role:r.role,image:r.image,phone:r.phone,country:r.country,city:r.city,postalCode:r.postalCode,streetAddress:r.streetAddress}),e)},session:{strategy:"jwt",maxAge:604800,updateAge:86400},pages:{signIn:`/${a.BV.AUTH}/${a.bQ.LOGIN}`},secret:process.env.NEXTAUTH_SECRET,debug:"production"===a.B5.DEV}},33873:e=>{e.exports=require("path")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},75986:(e,r,s)=>{function a(){for(var e,r,s=0,a="",t=arguments.length;s<t;s++)(e=arguments[s])&&(r=function e(r){var s,a,t="";if("string"==typeof r||"number"==typeof r)t+=r;else if("object"==typeof r)if(Array.isArray(r)){var i=r.length;for(s=0;s<i;s++)r[s]&&(a=e(r[s]))&&(t&&(t+=" "),t+=a)}else for(a in r)r[a]&&(t&&(t+=" "),t+=a);return t}(e))&&(a&&(a+=" "),a+=r);return a}s.d(r,{$:()=>a,A:()=>t});let t=a},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},80359:(e,r,s)=>{s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>m,routeModule:()=>u,tree:()=>l});var a=s(65239),t=s(48088),i=s(88170),o=s.n(i),n=s(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(r,d);let l={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1132)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\admin\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,25108)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,54413)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,m=["C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\admin\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},81630:e=>{e.exports=require("http")},94735:e=>{e.exports=require("events")},96330:e=>{e.exports=require("@prisma/client")}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[243,915,78,257,802,332,760,533,158,357,494,423,100],()=>s(80359));module.exports=a})();