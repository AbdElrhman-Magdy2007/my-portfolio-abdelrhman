(()=>{var e={};e.id=98,e.ids=[98],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},22586:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(22061),r(57105),r(12523);var t=r(23191),s=r(88716),i=r(37922),n=r.n(i),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(a,l);let d=["",{children:["auth",{children:["signin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,22061)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\auth\\signin\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,57105)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\auth\\signin\\page.tsx"],m="/auth/signin/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/auth/signin/page",pathname:"/auth/signin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},51893:(e,a,r)=>{let t={"19b477ae48e178edee5c6e3e817f94acf08c3b0d":()=>Promise.resolve().then(r.bind(r,83456)).then(e=>e.login),"527d1c05f636a017540588719c2fb51e3fce56a2":()=>Promise.resolve().then(r.bind(r,83456)).then(e=>e.signup),a76e3dc870aefe8c7051f39ab1f5198683531d53:()=>Promise.resolve().then(r.bind(r,83456)).then(e=>e.$$ACTION_1),bb2fb4d89767c1090d45f4cf3f524ab7462377c2:()=>Promise.resolve().then(r.bind(r,83456)).then(e=>e.$$ACTION_0)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"19b477ae48e178edee5c6e3e817f94acf08c3b0d":s.bind(null,"19b477ae48e178edee5c6e3e817f94acf08c3b0d"),"527d1c05f636a017540588719c2fb51e3fce56a2":s.bind(null,"527d1c05f636a017540588719c2fb51e3fce56a2"),a76e3dc870aefe8c7051f39ab1f5198683531d53:s.bind(null,"a76e3dc870aefe8c7051f39ab1f5198683531d53"),bb2fb4d89767c1090d45f4cf3f524ab7462377c2:s.bind(null,"bb2fb4d89767c1090d45f4cf3f524ab7462377c2")}},99593:(e,a,r)=>{Promise.resolve().then(r.bind(r,19555))},19555:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>N});var t=r(10326),s=r(17577),i=r(60235),n=r(91664),o=r(15616),l=r(90434),d=r(85999),c=r(35047),m=r(5280),u=r(77109),p=r(41135),f=r(3240),g=r(94902),h=r(60962),x=r(98484);let b=(e,a)=>{switch(a.type){case"SET_ERRORS":return{...e,...a.payload};case"CLEAR_ERRORS":return{};default:return e}},y={status:0,message:"",error:void 0,formData:void 0,className:void 0},w=(0,s.memo)(()=>{let e=(0,c.useRouter)(),a=(0,s.useRef)(null),[r,l]=(0,s.useState)(!1),[w,v]=(0,s.useState)(null),[E,N]=(0,s.useState)(!0),[C,j]=(0,s.useReducer)(b,{}),[S,P]=(0,s.useState)([]),M=(0,c.useParams)(),A=M?.locale||"en",[q,k]=(0,h.useFormState)(async(e,a)=>{let r={email:a.get("email"),password:a.get("password")};return(0,x.x)(r,A)},y),{getFormFields:R}=(0,m.Z)({slug:o.iY.LOGIN}),$=R(),_=(0,s.useCallback)(async r=>{if(r.preventDefault(),!a.current||!E)return;let t=new FormData(a.current),s={};t.forEach((e,a)=>{s[a]=e.toString()});let i={};if(s.email||(i.email=["Email is required"]),s.password||(i.password=["Password is required"]),Object.keys(i).length>0){j({type:"SET_ERRORS",payload:i}),d.Am.error("Please fill in all required fields",{style:L.error,duration:3e3,className:"glass-card border-gradient animate-glow toast-error"});return}try{l(!0),j({type:"CLEAR_ERRORS"});let a=await (0,u.signIn)("credentials",{email:s.email,password:s.password,redirect:!1});if(a?.error)try{let e=JSON.parse(a.error),r=e.validationError||{};j({type:"SET_ERRORS",payload:r}),e.responseError&&e.responseError!==w&&(d.Am.error(e.responseError,{style:L.error,duration:3e3,className:"glass-card border-gradient animate-glow toast-error"}),v(e.responseError))}catch(e){"An unexpected error occurred"!==w&&(d.Am.error("An unexpected error occurred",{style:L.error,duration:3e3,className:"glass-card border-gradient animate-glow toast-error"}),v("An unexpected error occurred"))}a?.ok&&("Login successful"!==w&&(d.Am.success("Login successful",{style:L.success,duration:3e3,className:"glass-card border-gradient animate-glow toast-success"}),v("Login successful")),e.replace("/"))}catch(e){"An unexpected error occurred"!==w&&(d.Am.error("An unexpected error occurred",{style:L.error,duration:3e3,className:"glass-card border-gradient animate-glow toast-error"}),v("An unexpected error occurred"))}finally{l(!1)}},[e,w,E,A]),L={error:{color:"#F87171",backgroundColor:"hsl(217 33% 17.5% / 0.2)",border:"1px solid hsl(3 81% 67% / 0.5)",borderRadius:"0.5rem",padding:"12px 16px",fontFamily:"Inter, sans-serif",fontSize:"0.875rem",fontWeight:500,boxShadow:"0 4px 12px hsl(215 91% 70% / 0.2)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",gap:"8px",position:"relative",overflow:"hidden"},success:{color:"#34D399",backgroundColor:"hsl(217 33% 17.5% / 0.2)",border:"1px solid hsl(160 64% 43% / 0.5)",borderRadius:"0.5rem",padding:"12px 16px",fontFamily:"Inter, sans-serif",fontSize:"0.875rem",fontWeight:500,boxShadow:"0 4px 12px hsl(215 91% 70% / 0.2)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",gap:"8px",position:"relative",overflow:"hidden"}},O=(e,a)=>{let r=Date.now();P(t=>[...t,{id:r,x:e+8*Math.random()-4,y:a+8*Math.random()-4}]),setTimeout(()=>P(e=>e.filter(e=>e.id!==r)),600)},I={hidden:{opacity:0,y:20,scale:.95},visible:e=>({opacity:1,y:0,scale:1,transition:{duration:.6,ease:"easeOut",type:"spring",stiffness:90,delay:.1*e}})};function z(e){throw Error("Function not implemented.")}return(0,t.jsxs)("form",{className:(0,p.Z)("space-y-6 w-full max-w-md mx-auto p-6 sm:p-8","glass-card border-gradient animate-glow","transition-all duration-300"),onSubmit:_,ref:a,dir:"ltr",children:[t.jsx("div",{className:"relative",children:$.map((e,a)=>(0,t.jsxs)(i.E.div,{className:"space-y-3 relative",variants:I,initial:"hidden",animate:"visible",custom:a,children:[t.jsx(g.Z,{...e,type:"email"===e.type?o.oP.EMAIL:o.oP.PASSWORD,label:"email"===e.name?"Email":"Password",placeholder:"email"===e.name?"Enter your email":"Enter your password",pattern:"email"===e.type?"[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,}$":".*",error:C[e.name]?.[0],disabled:r,onValidationChange:z,ariaLabel:e.label||e.name,className:(0,p.Z)("w-full p-3 rounded-lg bg-slate-900/50 border border-slate-700","text-slate-300 placeholder-slate-500 focus:ring-2 focus:ring-blue-400","transition-all duration-200 hover:shadow-md hover:shadow-blue-400/20")}),"email"===e.name&&t.jsx(i.E.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:document.activeElement?.name==="email"?.3:0},transition:{duration:.3},children:Array.from({length:5}).map((e,a)=>t.jsx(i.E.div,{className:"sparkle",style:{width:`${2*Math.random()+2}px`,height:`${2*Math.random()+2}px`,top:`${100*Math.random()}%`,left:`${100*Math.random()}%`},animate:{scale:[0,1.5,0],opacity:[0,.8,0],rotate:[0,180]},transition:{duration:1.5,repeat:1/0,delay:.5*Math.random(),ease:"easeInOut"}},`sparkle-field-${a}`))})]},e.name||a))}),t.jsx(i.E.div,{variants:I,initial:"hidden",animate:"visible",custom:$.length,children:t.jsx(n.z,{type:"submit",className:(0,p.Z)("w-full font-semibold rounded-lg py-2 px-4 transition-all duration-200","bg-gradient-to-r from-blue-400 to-purple-400 hover:from-blue-500 hover:to-purple-500","text-white border-gradient",(r||!E)&&"opacity-50 cursor-not-allowed"),disabled:r||!E,onMouseEnter:e=>O(e.clientX,e.clientY),onClick:e=>O(e.clientX,e.clientY),children:r?t.jsx(f.Z,{className:"w-5 h-5 animate-spin"}):"Login"})}),S.map(e=>t.jsx(i.E.div,{className:"sparkle absolute rounded-full",style:{left:e.x,top:e.y,width:8,height:8,background:"linear-gradient(135deg, hsl(215 91% 70% / 0.8), hsl(271 81% 75% / 0.8))"},initial:{scale:0,opacity:1,rotate:0},animate:{scale:2,opacity:0,rotate:180},transition:{duration:.6,ease:"easeOut"}},e.id))]})});w.displayName="LoginForm";let v=()=>{let e=Array.from({length:15}).map((e,a)=>({id:a,x:100*Math.random(),y:100*Math.random(),size:6*Math.random()+4,duration:6*Math.random()+6,delay:4*Math.random(),opacity:.3*Math.random()+.3})),a={animate:a=>({x:[e[a].x,e[a].x+(60*Math.random()-30),e[a].x],y:[e[a].y,e[a].y+(60*Math.random()-30),e[a].y],opacity:[0,e[a].opacity,0],scale:[0,1.2,0],rotate:[0,180,360],transition:{duration:e[a].duration,delay:e[a].delay,repeat:1/0,ease:"easeInOut",times:[0,.5,1]}}),pulse:{scale:[1,1.3,1],opacity:[.3,.6,.3],transition:{duration:4,repeat:1/0,ease:"easeInOut"}}};return(0,t.jsxs)("div",{className:"absolute inset-0 z-0 pointer-events-none overflow-hidden",children:[e.map(e=>t.jsx(i.E.div,{className:"particle animate-glow",style:{width:e.size,height:e.size,left:`${e.x}%`,top:`${e.y}%`,background:"linear-gradient(135deg, hsl(215 91% 70% / 0.5), hsl(271 81% 75% / 0.5))"},variants:a,animate:["animate","pulse"],custom:e.id},e.id)),t.jsx(i.E.div,{className:"absolute inset-0",style:{background:"linear-gradient(45deg, transparent, hsl(215 91% 70% / 0.2), transparent)"},animate:{opacity:[.1,.2,.1],x:[-30,30,-30]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]})},E=()=>t.jsx("div",{className:"text-center text-red-500 dark:text-red-400 p-4",children:"Error: Form component failed to load. Please check the Form component implementation."});function N(){let[e,a]=(0,s.useState)([]),[r,d]=(0,s.useState)(!1),c={hidden:{opacity:0,y:30,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{duration:.6,ease:"easeOut",type:"spring",stiffness:90}}},m=(e,t)=>{if(!r)return;let s=Date.now();a(a=>[...a,{id:s,x:e+8*Math.random()-4,y:t+8*Math.random()-4}]),setTimeout(()=>a(e=>e.filter(e=>e.id!==s)),600)};return r?(0,t.jsxs)("main",{className:"relative flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 overflow-hidden dark",children:[t.jsx(v,{}),(0,t.jsxs)(i.E.div,{className:"w-full max-w-md sm:max-w-lg p-6 sm:p-8 glass-card border-gradient hover:scale-105 transition-transform duration-300 animate-glow z-10",variants:{hidden:{opacity:0,y:50,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{duration:.8,ease:"easeOut",type:"spring",stiffness:80,staggerChildren:.2}}},initial:"hidden",animate:"visible",role:"region","aria-labelledby":"signin-title",dir:"ltr",children:[t.jsx(i.E.h2,{id:"signin-title",className:"text-3xl sm:text-4xl font-heading font-bold mb-8 text-center text-blue-400 animate-typewriter",variants:c,children:"Sign In"}),t.jsx(i.E.div,{variants:c,className:"min-h-[200px]",children:w?t.jsx(w,{}):t.jsx(E,{})}),(0,t.jsxs)(i.E.p,{className:"text-center text-slate-300 text-sm sm:text-base mt-8",variants:c,children:["Don't have an account?"," ",t.jsx("span",{className:"sparkle-container relative inline-block",children:(0,t.jsxs)(l.default,{href:`/${o.Z5.AUTH}/${o.iY.Register}`,className:`${(0,n.d)({variant:"link",size:"sm"})} !text-purple-400 hover:underline animate-reveal-text delay-200 relative group`,onMouseEnter:e=>m(e.clientX,e.clientY),onClick:e=>m(e.clientX,e.clientY),children:[t.jsx("span",{className:"relative z-10",children:"Create an Account"}),t.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/50 to-purple-400/50 opacity-0 group-hover:opacity-50 transition-opacity duration-600 rounded-full"})]})})]})]}),e.map(e=>t.jsx(i.E.div,{className:"sparkle absolute rounded-full",style:{left:e.x,top:e.y,width:8,height:8,background:"linear-gradient(135deg, hsl(215 91% 70% / 0.8), hsl(271 81% 75% / 0.8))"},initial:{scale:0,opacity:1,rotate:0},animate:{scale:1,opacity:0,rotate:180},transition:{duration:.6,ease:"easeOut"}},e.id))]}):t.jsx("main",{className:"relative flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 overflow-hidden dark",children:(0,t.jsxs)("div",{className:"w-full max-w-md sm:max-w-lg p-6 sm:p-8 glass-card border-gradient z-10",children:[t.jsx("h2",{className:"text-3xl sm:text-4xl font-heading font-bold mb-8 text-center text-blue-400",children:"Sign In"}),t.jsx("div",{className:"min-h-[200px]",children:t.jsx(w,{})})]})})}},98484:(e,a,r)=>{"use strict";r.d(a,{I:()=>s,x:()=>i}),r(15424);var t=r(46242),s=(0,t.$)("527d1c05f636a017540588719c2fb51e3fce56a2"),i=(0,t.$)("19b477ae48e178edee5c6e3e817f94acf08c3b0d")},71716:(e,a,r)=>{"use strict";r.d(a,{Z:()=>c});var t=r(84770),s=r.n(t);let i=new Uint8Array(256),n=i.length,o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).substr(1));let d=function(e,a=0){let r=(l[e[a+0]]+l[e[a+1]]+l[e[a+2]]+l[e[a+3]]+"-"+l[e[a+4]]+l[e[a+5]]+"-"+l[e[a+6]]+l[e[a+7]]+"-"+l[e[a+8]]+l[e[a+9]]+"-"+l[e[a+10]]+l[e[a+11]]+l[e[a+12]]+l[e[a+13]]+l[e[a+14]]+l[e[a+15]]).toLowerCase();if(!("string"==typeof r&&o.test(r)))throw TypeError("Stringified UUID is invalid");return r},c=function(e,a,r){let t=(e=e||{}).random||(e.rng||function(){return n>i.length-16&&(s().randomFillSync(i),n=0),i.slice(n,n+=16)})();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,a){r=r||0;for(let e=0;e<16;++e)a[r+e]=t[e];return a}return d(t)}},22061:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`C:\Users\raya\ShoppingCart\portfolio - Copy - Copy - Copy - Copy\src\app\auth\signin\page.tsx#default`)},83456:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$ACTION_0:()=>x,$$ACTION_1:()=>y,login:()=>h,signup:()=>b});var t=r(27745);r(26461);var s=r(24831),i=r(67096),n=r.n(i),o=r(8316),l=r(30207),d=r(71716),c=r(67189);let m={requiredEmail:"Email is required",validEmail:"Invalid email format",requiredPassword:"Password is required",passwordMinLength:"Password must be at least 6 characters",passwordMaxLength:"Password must be less than 40 characters",requiredName:"Name is required",nameMaxLength:"Name must be less than 50 characters",requiredConfirmPassword:"Password confirmation is required",passwordsDoNotMatch:"Passwords do not match",validLimit:"Limit must be a positive integer",limitMax:"Limit must be 100 or less"},u=e=>({isValid:e.password===e.confirmPassword,issue:{message:m.passwordsDoNotMatch,path:["confirmPassword"]}}),p=()=>c.z.object({email:c.z.string().trim().min(1,{message:m.requiredEmail}).email({message:m.validEmail}).transform(e=>e.toLowerCase()),password:c.z.string().min(1,{message:m.requiredPassword}).min(6,{message:m.passwordMinLength}).max(40,{message:m.passwordMaxLength})}),f=()=>c.z.object({name:c.z.string().trim().min(1,{message:m.requiredName}).max(50,{message:m.nameMaxLength}),email:c.z.string().trim().min(1,{message:m.requiredEmail}).email({message:m.validEmail}).transform(e=>e.toLowerCase()),password:c.z.string().min(1,{message:m.requiredPassword}).min(6,{message:m.passwordMinLength}).max(40,{message:m.passwordMaxLength}),confirmPassword:c.z.string().min(1,{message:m.requiredConfirmPassword}),limit:c.z.number().int().min(1,{message:m.validLimit}).max(100,{message:m.limitMax}).default(1)}).refine(e=>u(e).isValid,e=>u(e).issue);var g=r(85723);let h=(0,t.j)("bb2fb4d89767c1090d45f4cf3f524ab7462377c2",x);async function x(e,a){if(!e?.email||!e?.password)return{status:400,message:"Email and password are required",className:"text-red-500"};let r=p().safeParse(e);if(!r.success)return{status:400,error:r.error.formErrors.fieldErrors,className:"text-red-500"};try{let e=await s._.user.findUnique({where:{email:r.data.email},select:{id:!0,email:!0,name:!0,password:!0,role:!0,createdAt:!0,updatedAt:!0}});if(!e)return{status:401,message:"User not found",className:"text-red-500"};if(!await n().compare(r.data.password,e.password))return{status:401,message:"Incorrect password",className:"text-red-500"};let{password:a,...t}=e;return{status:200,message:"Login successful",user:t,className:"text-green-500"}}catch(e){return console.error("❌ Login Error:",{error:e instanceof Error?e.message:String(e),timestamp:new Date().toISOString()}),{status:500,message:"An unexpected error occurred",error:e instanceof Error?e.message:"Unknown error",className:"text-red-500"}}}let b=(0,t.j)("a76e3dc870aefe8c7051f39ab1f5198683531d53",y);async function y(e,a){let r=Object.fromEntries(a.entries()),t=f().safeParse(r);if(!t.success)return{status:400,error:t.error.formErrors.fieldErrors,formData:a,className:"text-red-500"};try{if(await s._.user.findUnique({where:{email:t.data.email},select:{id:!0}}))return{status:409,message:"User already exists",formData:a,className:"text-red-500"};let e=await n().hash(t.data.password,10),r=await s._.user.create({data:{id:(0,d.Z)(),name:t.data.name,email:t.data.email,password:e,role:"USER"},select:{id:!0,name:!0,email:!0,role:!0}}),i=`/${o.Z5.ADMIN}`;return(0,l.revalidatePath)(`${i}/${o.iY.USERS}/${r.id}/${o.iY.EDIT}`),(0,l.revalidatePath)(`${i}/${o.iY.USERS}`),{status:201,message:"Registration successful",user:r,className:"text-green-500"}}catch(e){return console.error("❌ Signup Error:",{error:e instanceof Error?e.message:String(e),timestamp:new Date().toISOString()}),{status:500,message:"An unexpected error occurred",error:e instanceof Error?e.message:"Unknown error",className:"text-red-500"}}}(0,g.h)([h,b]),(0,t.j)("19b477ae48e178edee5c6e3e817f94acf08c3b0d",h),(0,t.j)("527d1c05f636a017540588719c2fb51e3fce56a2",b)}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[276,190,346,500,391,239],()=>r(22586));module.exports=t})();