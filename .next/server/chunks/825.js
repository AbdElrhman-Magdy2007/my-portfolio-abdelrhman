exports.id=825,exports.ids=[825],exports.modules={73211:(e,a,r)=>{let t={"02d43f8f866c4dc6fb2fa57eabddf828e19e3352":()=>Promise.resolve().then(r.bind(r,12306)).then(e=>e.$$ACTION_2),"7f51daf30bff5fcced803d170612a219fe14e5e8":()=>Promise.resolve().then(r.bind(r,12306)).then(e=>e.addProduct),"992f6e02786f05de85a8c14d55ab88f69938ef4e":()=>Promise.resolve().then(r.bind(r,12306)).then(e=>e.deleteProduct),ad9241141530d5e54168308dad72cda782993d27:()=>Promise.resolve().then(r.bind(r,12306)).then(e=>e.$$ACTION_1),e122618004fcbd4c5d1f8b16f5aab8b72c6b80d4:()=>Promise.resolve().then(r.bind(r,12306)).then(e=>e.updateProduct),e5381fed0112081ab22bdd2368d47cc5dc033b00:()=>Promise.resolve().then(r.bind(r,12306)).then(e=>e.$$ACTION_0)};async function o(e,...a){return(await t[e]()).apply(null,a)}e.exports={"02d43f8f866c4dc6fb2fa57eabddf828e19e3352":o.bind(null,"02d43f8f866c4dc6fb2fa57eabddf828e19e3352"),"7f51daf30bff5fcced803d170612a219fe14e5e8":o.bind(null,"7f51daf30bff5fcced803d170612a219fe14e5e8"),"992f6e02786f05de85a8c14d55ab88f69938ef4e":o.bind(null,"992f6e02786f05de85a8c14d55ab88f69938ef4e"),ad9241141530d5e54168308dad72cda782993d27:o.bind(null,"ad9241141530d5e54168308dad72cda782993d27"),e122618004fcbd4c5d1f8b16f5aab8b72c6b80d4:o.bind(null,"e122618004fcbd4c5d1f8b16f5aab8b72c6b80d4"),e5381fed0112081ab22bdd2368d47cc5dc033b00:o.bind(null,"e5381fed0112081ab22bdd2368d47cc5dc033b00")}},75556:(e,a,r)=>{"use strict";r.d(a,{default:()=>el});var t,o=r(10326),i=r(17577),n=r(35047),d=r(60235),s=r(88129),l=r(15616),c=r(5280);r(15424);var u=r(46242),m=(0,u.$)("992f6e02786f05de85a8c14d55ab88f69938ef4e"),p=(0,u.$)("7f51daf30bff5fcced803d170612a219fe14e5e8");(0,u.$)("e122618004fcbd4c5d1f8b16f5aab8b72c6b80d4");var g=r(85999),f=r(51223),h=r(90434),x=r(46226),b=r(91664),y=r(57793),v=r(941);let E=y.fC,w=i.forwardRef(({className:e,...a},r)=>o.jsx(y.ck,{ref:r,className:(0,f.cn)("border-b",e),...a}));w.displayName="AccordionItem";let A=i.forwardRef(({className:e,children:a,...r},t)=>o.jsx(y.h4,{className:"flex",children:(0,o.jsxs)(y.xz,{ref:t,className:(0,f.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[a,o.jsx(v.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));A.displayName=y.xz.displayName;let N=i.forwardRef(({className:e,children:a,...r},t)=>o.jsx(y.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:o.jsx("div",{className:(0,f.cn)("pb-4 pt-0",e),children:a})}));N.displayName=y.VY.displayName;var j=r(18792),T=r(96633),S=r(32933);let C=j.fC,I=j.ZA,$=j.B4,O=i.forwardRef(({className:e,children:a,...r},t)=>(0,o.jsxs)(j.xz,{ref:t,className:(0,f.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[a,o.jsx(j.JO,{asChild:!0,children:o.jsx(v.Z,{className:"h-4 w-4 opacity-50"})})]}));O.displayName=j.xz.displayName;let P=i.forwardRef(({className:e,...a},r)=>o.jsx(j.u_,{ref:r,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:o.jsx(T.Z,{className:"h-4 w-4"})}));P.displayName=j.u_.displayName;let R=i.forwardRef(({className:e,...a},r)=>o.jsx(j.$G,{ref:r,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:o.jsx(v.Z,{className:"h-4 w-4"})}));R.displayName=j.$G.displayName;let k=i.forwardRef(({className:e,children:a,position:r="popper",...t},i)=>o.jsx(j.h_,{children:(0,o.jsxs)(j.VY,{ref:i,className:(0,f.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...t,children:[o.jsx(P,{}),o.jsx(j.l_,{className:(0,f.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),o.jsx(R,{})]})}));k.displayName=j.VY.displayName,i.forwardRef(({className:e,...a},r)=>o.jsx(j.__,{ref:r,className:(0,f.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=j.__.displayName;let F=i.forwardRef(({className:e,children:a,...r},t)=>(0,o.jsxs)(j.ck,{ref:t,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(j.wU,{children:o.jsx(S.Z,{className:"h-4 w-4"})})}),o.jsx(j.eT,{children:a})]}));F.displayName=j.ck.displayName,i.forwardRef(({className:e,...a},r)=>o.jsx(j.Z0,{ref:r,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=j.Z0.displayName;var D=r(44794),L=r(41135);let U={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.3}},hover:{scale:1.02,transition:{duration:.2}},tap:{scale:.98,transition:{duration:.1}}},_={initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-10,transition:{duration:.2}}},M={initial:{opacity:0,x:-10},animate:{opacity:1,x:0,transition:{duration:.2}}},H=i.memo(function({categories:e,categoryId:a,setCategoryId:r,className:t,required:n=!1}){let l=i.useMemo(()=>e.find(e=>e.id===a),[e,a]),c=i.useCallback(e=>{r(e)},[r]);return(0,o.jsxs)("div",{className:(0,L.Z)("space-y-2",t),children:[o.jsx(D._,{htmlFor:"categoryId",className:"text-sm font-medium text-foreground capitalize",children:"Category"}),o.jsx(d.E.div,{variants:U,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",children:(0,o.jsxs)(C,{name:"categoryId",onValueChange:c,value:a,required:n,children:[o.jsx(O,{id:"categoryId",className:(0,L.Z)("w-full h-12 bg-background border border-input rounded-xl","text-foreground placeholder-muted-foreground","focus:ring-2 focus:ring-primary focus:border-primary","hover:bg-accent/50 transition-all duration-200","bg-gradient-to-r from-primary/10 to-secondary/10"),"aria-label":"Select product category","aria-required":n,children:o.jsx($,{placeholder:"Select a category",children:l?.name||"Select a category"})}),o.jsx(s.M,{children:o.jsx(k,{className:(0,L.Z)("bg-background border border-border rounded-xl shadow-lg","text-foreground max-h-60 overflow-y-auto z-50"),children:o.jsx(d.E.div,{variants:_,initial:"initial",animate:"animate",exit:"exit",children:o.jsx(I,{children:e.length>0?e.map(e=>o.jsx(d.E.div,{variants:M,className:"px-4 py-2",children:o.jsx(F,{value:e.id,className:(0,L.Z)("text-foreground hover:bg-accent hover:text-accent-foreground","focus:bg-accent focus:text-accent-foreground","transition-colors duration-150 cursor-pointer rounded-md"),children:e.name})},e.id)):o.jsx("div",{className:"px-4 py-2 text-muted-foreground italic","aria-live":"polite",children:"No categories available"})})})})})]})})]})});var Z=r(41190),z=r(53524),G=r(98091),B=r(83855);!function(e){e.ProductTechS="ProductTechS",e.ProductAddonS="ProductAddonS"}(t||(t={}));let q={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-10,transition:{duration:.2}}},V={hidden:{opacity:0,scale:.95,transition:{duration:.2}},visible:{opacity:1,scale:1,transition:{duration:.2}},hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95,transition:{duration:.1}}};function W({onChange:e,index:a,item:r,currentState:t,optionKey:n}){let d=(0,i.useMemo)(()=>[z.PackageOption.FullStack,z.PackageOption.Backend,z.PackageOption.Frontend,z.PackageOption.UI,z.PackageOption.UX],[]),s=(0,i.useMemo)(()=>d.filter(e=>!t.some(a=>a.name===e)||r.name===e),[t,r.name]);return(0,o.jsxs)(C,{onValueChange:a=>e("name",a),value:r.name||"",required:!0,children:[o.jsx(O,{className:(0,L.Z)("w-full p-3 rounded-md bg-background text-foreground border border-input","focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background","hover:bg-accent/50"),"aria-label":"Select addon option","aria-required":"true",children:o.jsx($,{placeholder:"Select Addon"})}),o.jsx(k,{className:(0,L.Z)("rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto","bg-background border border-border text-foreground"),children:o.jsx(I,{children:s.length>0?s.map((e,a)=>o.jsx(F,{value:e,className:(0,L.Z)("text-foreground hover:bg-accent hover:text-accent-foreground","transition-all duration-200 cursor-pointer py-2 px-4"),children:e},a)):o.jsx("div",{className:"text-muted-foreground text-center py-2",children:"No options available"})})})]})}let Y=function({state:e,setState:a,optionKey:r,className:t,placeholder:n="Enter option",validate:l=()=>null}){let[c,u]=(0,i.useState)(!1),m="ProductTechS"===r,p=m||e.length<1,{addOption:f,onChange:h,removeOption:x}=(0,i.useCallback)(()=>({addOption:async()=>{if(!m&&e.length>=1){g.Am.error("Only one addon is allowed.",{icon:o.jsx(G.Z,{className:"w-5 h-5 text-red-400"}),style:{backgroundColor:"#4E1313",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}});return}u(!0);try{if(e.length>0){let a=e[e.length-1],r=l(a);if(r){g.Am.error(r,{icon:o.jsx(G.Z,{className:"w-5 h-5 text-red-400"}),style:{backgroundColor:"#4E1313",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}});return}}a(e=>[...e,{name:""}]),g.Am.success(`${m?"Technology":"Addon"} added`,{icon:o.jsx(B.Z,{className:"w-5 h-5 text-green-400"}),style:{backgroundColor:"#1A3C34",color:"#6EE7B7",border:"1px solid #6EE7B7",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}})}catch(e){g.Am.error("Failed to add option",{icon:o.jsx(G.Z,{className:"w-5 h-5 text-red-400"}),style:{backgroundColor:"#4E1313",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}})}finally{u(!1)}},onChange:(e,r)=>{a(a=>{let t=[...a];return t[e]=r,t})},removeOption:e=>{a(a=>a.filter((a,r)=>r!==e)),g.Am.success(`${m?"Technology":"Addon"} removed`,{icon:o.jsx(G.Z,{className:"w-5 h-5 text-green-400"}),style:{backgroundColor:"#1A3C34",color:"#6EE7B7",border:"1px solid #6EE7B7",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}})}}),[a,e,l,m])();return(0,o.jsxs)("div",{className:(0,L.Z)("space-y-6",t),children:[o.jsx(s.M,{children:e.length>0&&o.jsx(d.E.ul,{className:"space-y-4",initial:"hidden",animate:"visible",exit:"exit",variants:{visible:{transition:{staggerChildren:.1}}},children:e.map((a,t)=>(0,o.jsxs)(d.E.li,{variants:q,className:(0,L.Z)("flex items-end gap-4 p-4 rounded-xl shadow-sm","bg-background border border-border","hover:shadow-md transition-all duration-300"),role:"listitem","aria-label":`${m?"Technology":"Addon"} option ${t+1}`,children:[(0,o.jsxs)("div",{className:"flex-1 space-y-2",children:[o.jsx(D._,{className:"text-sm font-medium text-foreground",htmlFor:`${r}-${t}-name`,children:m?"Technology":"Addon Name"}),m?o.jsx(Z.I,{id:`${r}-${t}-name`,type:"text",placeholder:n,value:a.name??"",onChange:e=>h(t,{...a,name:e.target.value}),className:(0,L.Z)("w-full p-3 rounded-md bg-background text-foreground border border-input","focus:ring-2 focus:ring-primary focus:border-primary","placeholder-muted-foreground"),required:!0,"aria-required":"true"}):o.jsx(W,{item:a,onChange:(e,r)=>h(t,{...a,[e]:r}),index:t,currentState:e,optionKey:r})]}),o.jsx(d.E.div,{variants:V,whileHover:"hover",whileTap:"tap",children:o.jsx(b.z,{type:"button",variant:"outline",size:"icon",onClick:()=>x(t),className:(0,L.Z)("flex-shrink-0 border-destructive text-destructive hover:bg-destructive/10 hover:text-destructive","focus:ring-2 focus:ring-destructive focus:ring-offset-2 focus:ring-offset-background"),"aria-label":`Remove ${m?"technology":"addon"} option ${t+1}`,children:o.jsx(G.Z,{className:"w-5 h-5"})})})]},t))})}),o.jsx(s.M,{children:p&&o.jsx(d.E.div,{variants:V,initial:"hidden",animate:"visible",exit:"hidden",whileHover:"hover",whileTap:"tap",children:(0,o.jsxs)(b.z,{type:"button",variant:"outline",className:(0,L.Z)("w-full py-3 rounded-xl shadow-sm","bg-gradient-to-r from-primary to-secondary text-primary-foreground border border-primary/50","hover:bg-primary/80 hover:border-primary focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background","flex items-center justify-center gap-2",c&&"opacity-50 cursor-not-allowed"),onClick:f,disabled:c,"aria-label":`Add new ${m?"technology":"addon"} option`,"aria-disabled":c?"true":"false",children:[o.jsx(B.Z,{className:"w-5 h-5"}),o.jsx("span",{children:m?"Add Technology":"Add Addon"}),c&&(0,o.jsxs)("svg",{className:"animate-spin h-5 w-5 ml-2 text-primary-foreground",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})]})})})]})};var X=r(86333),K=r(51896),J=r(54659),Q=r(91470),ee=r(3240);let ea=({type:e,label:a,placeholder:r,error:t,value:i="",onChange:n=()=>{},disabled:d=!1,className:s="",ariaLabel:l,pattern:c,required:u=!1,autoFocus:m=!1,name:p,options:g=[]})=>{let f={id:p,name:p,value:i,onChange:n,placeholder:r,required:u,className:(0,L.W)("w-full p-3 rounded-lg bg-slate-900/50 border border-slate-700","text-slate-300 placeholder-slate-500 focus:ring-2 focus:ring-blue-400","transition-all duration-200 hover:shadow-md hover:shadow-blue-400/20",t?"border-red-500":"border-slate-700",s),disabled:d,"aria-label":l||a,"aria-invalid":!!t,"aria-describedby":t?`${p}-error`:void 0,autoFocus:m,...c?{pattern:c}:{}};return(0,o.jsxs)("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:p,className:"block text-sm font-medium text-slate-300",children:a}),"textarea"===e?o.jsx("textarea",{...f}):"select"===e&&g?(0,o.jsxs)("select",{...f,onChange:n,children:[o.jsx("option",{value:"",children:"Select an option"}),g.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))]}):"radio"===e&&g?o.jsx("div",{className:"radio-group",children:g.map(e=>(0,o.jsxs)("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:p,value:e.value,checked:i===e.value,onChange:n,required:u,disabled:d,className:"form-radio","aria-label":e.label}),e.label]},e.value))}):o.jsx("input",{type:e,...f}),t&&o.jsx("p",{id:`${p}-error`,className:"mt-1 text-sm text-red-500",children:t})]})};var er=r(60962);let et={initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.9,transition:{duration:.6,ease:"easeInOut"}}},eo=()=>(0,o.jsxs)(d.E.div,{className:"fixed inset-0 flex items-center justify-center bg-gray-900/95 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[o.jsx(d.E.div,{animate:{rotate:360,scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-16 w-16 border-t-4 border-indigo-500 rounded-full"}),o.jsx(d.E.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"absolute mt-24 text-indigo-200 text-lg font-medium",children:"Saving your product..."})]}),ei=({selectedImage:e,setSelectedImage:a,className:r})=>{let t=(0,i.useCallback)(e=>{let r=e.target.files?.[0];r&&r.size<=5242880?a(URL.createObjectURL(r)):g.Am.error("Image must be under 5MB",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}})},[a]);return(0,o.jsxs)(d.E.div,{className:(0,f.cn)("group relative w-56 h-56 overflow-hidden rounded-xl border-2 border-indigo-600/30 shadow-lg hover:shadow-xl transition-all duration-300",r),whileHover:{scale:1.03},whileTap:{scale:.97},children:[e?o.jsx(x.default,{src:e,alt:"Product Image",width:224,height:224,className:"rounded-xl object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-800/50 rounded-xl flex items-center justify-center",children:o.jsx(K.Z,{className:"w-12 h-12 text-indigo-400"})}),(0,o.jsxs)("div",{className:(0,f.cn)("absolute inset-0 bg-indigo-600/20 flex items-center justify-center transition-opacity duration-300",e?"group-hover:opacity-100 opacity-0":"opacity-100"),children:[o.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"image-upload",onChange:t,name:"image","aria-label":"Upload product image"}),o.jsx("label",{htmlFor:"image-upload",className:"w-full h-full flex items-center justify-center cursor-pointer",children:o.jsx(K.Z,{className:"w-10 h-10 text-indigo-200 drop-shadow-md"})})]})]})},en=({pending:e,product:a})=>{let[r,t]=(0,i.useState)({pending:!1,status:null,message:""}),n=(0,i.useCallback)(async e=>{try{t(e=>({...e,pending:!0}));let a=await m(e);t(e=>({...e,status:a.status,message:a.message}))}catch(e){console.error("[FormActions] Delete error:",e),t(e=>({...e,status:500,message:"An unexpected error occurred"}))}finally{t(e=>({...e,pending:!1}))}},[]);return(0,i.useEffect)(()=>{if(r.message&&r.status&&!r.pending){let e=200===r.status;g.Am[e?"success":"error"](r.message,{icon:e?o.jsx(J.Z,{className:"w-5 h-5 text-green-400"}):o.jsx(Q.Z,{className:"w-5 h-5 text-red-400"}),style:{background:e?"linear-gradient(135deg, #1A3C34, #2D6A4F)":"linear-gradient(135deg, #4E1313, #7F1D1D)",color:e?"#6EE7B7":"#FCA5A5",border:`1px solid ${e?"#6EE7B7":"#FCA5A5"}`,borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"12px"},position:"top-right",duration:3e3})}},[r.message,r.status,r.pending]),(0,o.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,o.jsxs)("div",{className:(0,f.cn)("grid",a?"grid-cols-2":"grid-cols-1","gap-4"),children:[o.jsx(d.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:o.jsx(b.z,{type:"submit",disabled:e,className:(0,f.cn)("bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 rounded-lg","hover:from-indigo-700 hover:to-purple-700 border border-indigo-600/30","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2",e&&"opacity-60 cursor-not-allowed"),"aria-label":a?"Update product":"Add product",children:e?o.jsx(ee.Z,{className:"w-5 h-5 text-white animate-spin"}):a?"Update Product":"Add Product"})}),a&&o.jsx(d.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:o.jsx(b.z,{variant:"outline",disabled:r.pending,onClick:()=>n(a.id),className:(0,f.cn)("border-indigo-600/30 text-indigo-300 font-semibold py-3 rounded-lg","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2",r.pending&&"opacity-60 cursor-not-allowed"),"aria-label":"Delete product",children:r.pending?o.jsx(ee.Z,{className:"w-5 h-5 text-indigo-300 animate-spin"}):"Delete Product"})})]}),o.jsx(d.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:o.jsx(h.default,{href:`/${l.Z5.ADMIN}/${l.iY.MENU_ITEMS}`,className:(0,b.d)({variant:"outline",className:(0,f.cn)("w-full text-center font-semibold border border-indigo-600/30","py-3 rounded-lg text-indigo-300","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","shadow-lg hover:shadow-xl transition-all duration-300")}),"aria-label":"Cancel and return to menu items",children:"Cancel"})})]})},ed=({productTechs:e,setProductTechs:a})=>o.jsx(E,{type:"single",collapsible:!0,className:"bg-gray-800/50 border border-indigo-600/30 rounded-xl shadow-md",children:(0,o.jsxs)(w,{value:"item-1",className:"border-none",children:[o.jsx(A,{className:(0,f.cn)("text-indigo-300 text-xl font-semibold px-4 py-3","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","transition-all duration-300"),"aria-label":"Toggle product technologies",children:"Product Technologies"}),o.jsx(N,{className:"px-4 py-3 text-indigo-200",children:o.jsx(Y,{optionKey:t.ProductTechS,state:e,setState:a,className:"bg-gray-800/50 text-indigo-200 border-indigo-600/30 rounded-lg",placeholder:"Add technology (e.g., React, TypeScript)",validate:e=>e.name?.trim()?null:"Technology name is required"})})]})}),es=({productAddons:e,setProductAddons:a})=>o.jsx(E,{type:"single",collapsible:!0,className:"bg-gray-800/50 border border-indigo-600/30 rounded-xl shadow-md",children:(0,o.jsxs)(w,{value:"item-1",className:"border-none",children:[o.jsx(A,{className:(0,f.cn)("text-indigo-300 text-xl font-semibold px-4 py-3","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","transition-all duration-300"),"aria-label":"Toggle product addons",children:"Product Addons"}),o.jsx(N,{className:"px-4 py-3 text-indigo-200",children:o.jsx(Y,{optionKey:t.ProductAddonS,state:e,setState:a,className:"bg-gray-800/50 text-indigo-200 border-indigo-600/30 rounded-lg",placeholder:"Select addon (e.g., FullStack, Backend)",validate:e=>e.name?.trim()?Object.values(l.FA).includes(e.name)?null:"Invalid addon name":"Addon name is required"})})]})}),el=function({categories:e,product:a}){(0,n.useRouter)();let[r,t]=(0,i.useState)(a?.image??null),[u,m]=(0,i.useState)(a?.categoryId??e[0]?.id??""),[x,b]=(0,i.useState)(a?.ProductTech?.map(e=>({name:e.name}))??[]),[y,v]=(0,i.useState)(a?.ProductAddon?.map(e=>({name:Object.values(l.FA).find(a=>a===e.name)||l.FA.Backend}))??[{name:l.FA.Backend}]),[E,w]=(0,i.useState)(!1),{getFormFields:A}=(0,c.Z)({slug:`${l.Z5.ADMIN}/${l.iY.MENU_ITEMS}`}),N=(0,i.useMemo)(()=>A(),[A]),[j,T]=(0,i.useState)(()=>({name:a?.name??"",description:a?.description??"",liveDemoLink:a?.liveDemoLink??"",gitHubLink:a?.gitHubLink??""})),[S,C]=(0,er.useFormState)((e,a)=>p({categoryId:u,options:{productTechs:x,productAddons:y}},e,a),{message:"",status:0,error:void 0}),I=(0,i.useCallback)(e=>a=>{let r=a.target.value;console.log(`[Form] Field Change: ${e} = "${r}" (type: ${a.target.type}, id: ${a.target.id})`),T(a=>{let t={...a,[e]:r};return console.log("[Form] Updated formValues:",t),t})},[]);return o.jsx(s.M,{mode:"wait",children:E?o.jsx(eo,{},"loader"):(0,o.jsxs)(d.E.form,{action:e=>{let t=["name","description"].filter(e=>!j[e]||""===j[e].toString().trim());if(t.length>0){g.Am.error(`Please fill in: ${t.join(", ")}`,{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});return}if(!a&&!r){let a=document.querySelector("#image-upload");if(!a?.files?.[0]){g.Am.error("Please upload an image",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});return}e.append("image",a.files[0])}if(!u){g.Am.error("Please select a category",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});return}if(1!==y.length){g.Am.error("Exactly one product addon is required",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});return}e.append("categoryId",u),Object.entries(j).forEach(([a,r])=>{let t=r?.toString()||"";e.append(a,t),console.log(`[Form] Appending to FormData: ${a} = "${t}"`)}),e.append("productTechs",JSON.stringify(x)),e.append("productAddons",JSON.stringify(y));let o={};e.forEach((e,a)=>{o[a]=e instanceof File?`[File: ${e.name}]`:e}),console.log("[Form] FormData Keys:",Array.from(e.keys())),console.log("[Form] FormData:",o),C(e)},variants:et,initial:"initial",animate:"animate",exit:"exit",className:"relative flex flex-col md:flex-row gap-8 p-8 bg-gray-900/90 rounded-2xl shadow-2xl border border-indigo-600/30 max-w-4xl mx-auto backdrop-blur-md",role:"form","aria-labelledby":"product-form-title",children:[o.jsx("h2",{id:"product-form-title",className:"sr-only",children:a?"Update Product":"Add Product"}),o.jsx("div",{className:"absolute top-4 right-4",children:(0,o.jsxs)(h.default,{href:`/${l.Z5.ADMIN}/${l.iY.MENU_ITEMS}`,className:"flex items-center gap-2 text-indigo-400 hover:text-indigo-200 transition-colors duration-300 group","aria-label":"Back to menu items",children:[o.jsx("span",{className:"text-sm font-medium",children:"Back to Menu"}),o.jsx(X.Z,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform duration-300"})]})}),(0,o.jsxs)(d.E.div,{className:"flex-shrink-0 pt-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[o.jsx(ei,{className:(0,f.cn)("bg-gray-900/90 border border-indigo-600/30 rounded-xl p-3 shadow-md"),selectedImage:r,setSelectedImage:t}),S?.error?.image&&(0,o.jsxs)(d.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,f.cn)("text-sm text-red-400 font-medium text-center mt-3 flex items-center gap-2 bg-red-500/10 border border-red-500/30 rounded-lg p-2"),"aria-live":"polite",children:[o.jsx("span",{className:"text-red-400",children:"⚠"})," ",S.error.image]})]}),(0,o.jsxs)(d.E.div,{className:"flex-1 space-y-6 pt-8",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:[o.jsx("div",{className:"grid gap-4",children:N.map(e=>(0,o.jsxs)(d.E.div,{className:"space-y-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:["gitHubLink"===e.name||"liveDemoLink"===e.name?(0,o.jsxs)("div",{children:[o.jsx("label",{htmlFor:e.name,className:"text-indigo-300 font-medium text-sm",children:e.label}),o.jsx("input",{id:e.name,name:e.name,type:"url",placeholder:e.placeholder??"",pattern:e.pattern,value:j[e.name]??"",onChange:I(e.name),className:(0,f.cn)("w-full p-3 bg-gray-800/50 border border-indigo-600/30 rounded-lg","text-indigo-200 placeholder-indigo-400/50","focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400/50","transition-all duration-300",S?.error?.[e.name]&&"border-red-500/30"),"aria-label":e.ariaLabel})]}):o.jsx(ea,{...e,type:e.type,label:e.label||e.name,placeholder:e.placeholder??"",error:S?.error?.[e.name],value:j[e.name]??"",onChange:I(e.name),disabled:S.pending,pattern:e.pattern,ariaLabel:e.ariaLabel,required:e.required,className:(0,f.cn)("w-full p-3 bg-gray-800/50 border border-indigo-600/30 rounded-lg","text-indigo-200 placeholder-indigo-400/50","focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400/50","transition-all duration-300",S?.error?.[e.name]&&"border-red-500/30")}),S?.error?.[e.name]&&(0,o.jsxs)(d.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,f.cn)("text-sm text-red-400 font-medium mt-1 flex items-center gap-2 bg-red-500/10 border border-red-500/30 rounded-lg p-2"),"aria-live":"polite",children:[o.jsx("span",{className:"text-red-400",children:"⚠"}),S.error[e.name]]})]},e.name))}),(0,o.jsxs)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[o.jsx(H,{categoryId:u,categories:e,setCategoryId:m,className:(0,f.cn)("w-full p-3 bg-gray-800/50 border border-indigo-600/30 rounded-lg","text-indigo-200","focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400/50","transition-all duration-300",S?.error?.categoryId&&"border-red-500/30")}),S?.error?.categoryId&&(0,o.jsxs)(d.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,f.cn)("text-sm text-red-400 font-medium mt-1 flex items-center gap-2 bg-red-500/10 border border-red-500/30 rounded-lg p-2"),"aria-live":"polite",children:[o.jsx("span",{className:"text-red-400",children:"⚠"})," ",S.error.categoryId]})]}),o.jsx(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},children:o.jsx(ed,{productTechs:x,setProductTechs:b})}),o.jsx(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},children:o.jsx(es,{productAddons:y,setProductAddons:v})}),o.jsx(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.7},children:o.jsx(en,{pending:S.pending,product:a})})]})]},"form")})}},41190:(e,a,r)=>{"use strict";r.d(a,{I:()=>n});var t=r(10326),o=r(17577),i=r(51223);let n=o.forwardRef(({className:e,type:a,...r},o)=>t.jsx("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...r}));n.displayName="Input"},44794:(e,a,r)=>{"use strict";r.d(a,{_:()=>l});var t=r(10326),o=r(17577),i=r(34478),n=r(79360),d=r(51223);let s=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=o.forwardRef(({className:e,...a},r)=>t.jsx(i.f,{ref:r,className:(0,d.cn)(s(),e),...a}));l.displayName=i.f.displayName},5280:(e,a,r)=>{"use strict";r.d(a,{Z:()=>i});var t=r(15616);let o={email:{label:"Email Address",name:"email",type:"email",placeholder:"Enter your email",pattern:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",ariaLabel:"Email address"},password:{label:"Password",name:"password",type:"password",placeholder:"Enter your password",ariaLabel:"Password"},name:{label:"Full Name",name:"name",type:"text",placeholder:"Enter your full name",ariaLabel:"Full name"},confirmPassword:{label:"Confirm Password",name:"confirmPassword",type:"password",placeholder:"Confirm your password",ariaLabel:"Confirm password"},phone:{label:"Phone Number",name:"phone",type:"tel",placeholder:"Enter your phone number",pattern:"^\\+?[1-9]\\d{1,14}$",ariaLabel:"Phone number"},productName:{label:"Product Name",name:"name",type:"text",placeholder:"Enter product name",ariaLabel:"Product name"},description:{label:"Description",name:"description",type:"text",placeholder:"Enter product description",ariaLabel:void 0,pattern:void 0},liveDemoLink:{label:"Live Demo Link (optional)",name:"liveDemoLink",type:"url",placeholder:"https://example.com",pattern:"^https?://.*",ariaLabel:"Live demo link"},gitHubLink:{label:"GitHub Link (optional)",name:"gitHubLink",type:"url",placeholder:"https://github.com/user/repo",pattern:"^https?://(www\\.)?github\\.com/[\\w-]+/[\\w-]+",ariaLabel:"GitHub repository link"}},i=({slug:e})=>{let a=()=>[{...o.email,autoFocus:!0},{...o.password}],r=()=>[{...o.name,autoFocus:!0},{...o.email},{...o.password},{...o.confirmPassword}],i=()=>[{...o.name,autoFocus:!0},{...o.email},{...o.phone},{...o.streetAddress},{...o.postalCode},{...o.city},{...o.country}],n=()=>[{...o.productName,autoFocus:!0},{...o.description},{...o.liveDemoLink},{...o.gitHubLink}];return{getFormFields:()=>{switch(e){case t.iY.LOGIN:return a();case t.iY.Register:return r();case t.Z5.PROFILE:return i();case`${t.Z5.ADMIN}/${t.iY.MENU_ITEMS}`:return n();default:return console.warn(`[useFormFields] Unknown slug: ${e}`),[]}}}}},12306:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$ACTION_0:()=>A,$$ACTION_1:()=>j,$$ACTION_2:()=>S,addProduct:()=>w,deleteProduct:()=>T,updateProduct:()=>N});var t=r(27745);r(26461);var o=r(24831),i=r(8316),n=r(67189);let d={requiredName:"Product name is required",requiredDescription:"Product description is required",requiredCategory:"Category is required",requiredImage:"Product image is required",invalidImage:"Image must be a valid file (JPEG, PNG, GIF, WebP, SVG, BMP) under 15MB",requiredTech:"At least one technology is required",invalidTech:"Technology name is required",requiredAddon:"Exactly one addon is required",invalidAddon:"Addon must be a valid package option (FullStack, Backend, Frontend, UI, UX)",tooManyAddons:"Only one addon is allowed",invalidLiveDemoLink:"Live demo link must be a valid URL",invalidGitHubLink:"GitHub link must be a valid GitHub repository URL (e.g., https://github.com/user/repo)"},s=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/bmp"],l=e=>"string"!=typeof e?"":e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]+>/g,"").trim(),c=e=>n.z.instanceof(File,{message:d.invalidImage}).optional().refine(a=>!e||null!=a&&a.size>0,{message:d.requiredImage}).refine(e=>!e||s.includes(e.type)&&e.size<=15728640,{message:d.invalidImage}),u=()=>({productTechs:n.z.array(n.z.object({name:n.z.string().trim().min(1,{message:d.invalidTech})})).min(1,{message:d.requiredTech}).default([]),productAddons:n.z.array(n.z.object({name:n.z.enum(Object.values(i.FA),{message:d.invalidAddon})})).min(1,{message:d.requiredAddon}).max(1,{message:d.tooManyAddons}).default([])}),m=()=>({name:n.z.preprocess(l,n.z.string().trim().min(1,{message:d.requiredName}).max(100,{message:"Product name must be less than 100 characters"})),description:n.z.preprocess(l,n.z.string().trim().min(1,{message:d.requiredDescription}).max(1e3,{message:"Description must be less than 1000 characters"})),categoryId:n.z.string().uuid({message:d.requiredCategory}),liveDemoLink:n.z.string().optional().refine(e=>!e||n.z.string().url().safeParse(e).success,{message:d.invalidLiveDemoLink}),gitHubLink:n.z.string().optional().refine(e=>!e||n.z.string().url().safeParse(e).success&&/^https?:\/\/(www\.)?github\.com\/[\w-]+\/[\w-]+(\/.*)?$/.test(e),{message:d.invalidGitHubLink}),...u()}),p=()=>n.z.object({...m(),image:c(!0)});var g=r(30207),f=r(85723);let h=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/bmp"],x="[ServerActions]",b=e=>new Promise(a=>setTimeout(a,e)),y=async e=>{let a=crypto.randomUUID();if(console.log(`${x} [${a}] Validating image: ${e.name} (${e.size} bytes, type: ${e.type})`),!h.includes(e.type))throw console.error(`${x} [${a}] Invalid image type: ${e.type}`),Error(`Invalid image type: ${e.type}. Supported types: ${h.join(", ")}`);if(e.size>15728640){let r=(e.size/1048576).toFixed(2);throw console.error(`${x} [${a}] Image too large: ${r}MB`),Error(`Image size (${r}MB) exceeds the 15MB limit`)}let r=new FormData;r.append("file",e),r.append("pathName","product_images");let t=null;for(let e=1;e<=3;e++)try{console.log(`${x} [${a}] Upload attempt ${e}`);let t=await fetch("http://localhost:3000/api/upload",{method:"POST",body:r});if(!t.ok)throw Error(`HTTP ${t.status}: ${t.statusText}`);let o=await t.json();if(!o?.url)throw Error("Invalid response: Missing image URL");return console.log(`${x} [${a}] Image uploaded: ${o.url}`),o.url}catch(r){if(t=r instanceof Error?r:Error("Unknown upload error"),console.error(`${x} [${a}] Upload attempt ${e} failed: ${t.message}`),e<3){let r=1e3*Math.pow(2,e-1);console.log(`${x} [${a}] Retrying after ${r}ms`),await b(r)}}throw console.error(`${x} [${a}] Image upload failed after 3 attempts`),t||Error("Image upload failed")},v=async e=>{let a=[`/${i.Z5.MENU}`,`/${i.Z5.ADMIN}/${i.iY.MENU_ITEMS}`,e?`/${i.Z5.ADMIN}/${i.iY.MENU_ITEMS}/${e}/${i.iY.EDIT}`:null,"/"].filter(Boolean);console.log(`${x} Revalidating paths: ${a.join(", ")}`),await Promise.all(a.map(e=>(0,g.revalidatePath)(e)))},E=e=>{if(0===e.productTechs.length)return{status:400,message:"At least one technology is required"};for(let a of e.productTechs)if(!a.name?.trim())return{status:400,message:"All technologies must have a valid name"};if(1!==e.productAddons.length)return{status:400,message:"Exactly one product addon is required"};let a=e.productAddons[0];return a.name&&Object.values(i.FA).includes(a.name)?null:{status:400,message:`Invalid addon name: ${a.name||"undefined"}. Expected one of: ${Object.values(i.FA).join(", ")}`}},w=(0,t.j)("e5381fed0112081ab22bdd2368d47cc5dc033b00",A);async function A(e,a,r){let t=crypto.randomUUID();console.log(`${x} [${t}] Processing addProduct`);try{let a={};r.forEach((e,r)=>{a[r]=e instanceof File?`[File: ${e.name}]`:e}),console.log(`${x} [${t}] Raw FormData:`,a);let n=r.get("productTechs"),d=r.get("productAddons"),s=r.get("gitHubLink"),l=n?JSON.parse(n).map(e=>({name:e.name})):[],c=d?JSON.parse(d).map(e=>{if(!Object.values(i.FA).includes(e.name))throw Error(`Invalid addon name: ${e.name}. Expected one of: ${Object.values(i.FA).join(", ")}`);return{name:e.name}}):[],u={name:r.get("name"),description:r.get("description"),categoryId:e.categoryId,image:r.get("image"),productTechs:l,productAddons:c,liveDemoLink:r.get("liveDemoLink"),gitHubLink:""===s||null===s?void 0:s};console.log(`${x} [${t}] Validation Input:`,u);let m=p().safeParse(u);if(!m.success){let e=m.error.flatten();return console.log(`${x} [${t}] Validation Errors:`,e),{status:400,message:"Invalid form data",error:Object.fromEntries(Object.entries(e.fieldErrors).map(([e,a])=>[e,a?.join(", ")||""])),formData:r}}let{name:g,description:f,categoryId:h,image:b,productTechs:w,productAddons:A,liveDemoLink:N,gitHubLink:j}=m.data;if(console.log(`${x} [${t}] Validated Data:`,{name:g,description:f,categoryId:h,liveDemoLink:N,gitHubLink:j,productTechs:w,productAddons:A}),!b||0===b.size)return console.error(`${x} [${t}] No image provided`),{status:400,message:"An image is required",error:{image:"Image is required"}};let T=await y(b),S=E({productTechs:w.map(e=>({name:e.name})),productAddons:A.map(e=>({name:e.name}))});if(S)return console.error(`${x} [${t}] Options validation failed: ${S.message}`),S;let C=await o._.product.create({data:{name:g,description:f,image:T,categoryId:h,liveDemoLink:N||null,gitHubLink:j||null,order:0,ProductTech:{createMany:{data:w.map(e=>({name:e.name}))}},ProductAddon:{createMany:{data:A.map(e=>({name:e.name}))}}}});return console.log(`${x} [${t}] Product created: ${C.id}`),await v(),{status:201,message:"Product added successfully"}}catch(e){return console.error(`${x} [${t}] Error:`,e),{status:500,message:`Failed to add product: ${e instanceof Error?e.message:"Unknown error"}`}}}let N=(0,t.j)("ad9241141530d5e54168308dad72cda782993d27",j);async function j(e,a,r){let t=crypto.randomUUID();console.log(`${x} [${t}] Processing updateProduct for ID: ${e.productId}`);try{let a={};r.forEach((e,r)=>{a[r]=e instanceof File?`[File: ${e.name}]`:e}),console.log(`${x} [${t}] Raw FormData:`,a);let n=r.get("productTechs"),d=r.get("productAddons"),s=r.get("gitHubLink"),l=n?JSON.parse(n).map(e=>({name:e.name})):[],c=d?JSON.parse(d).map(e=>{if(!Object.values(i.FA).includes(e.name))throw Error(`Invalid addon name: ${e.name}. Expected one of: ${Object.values(i.FA).join(", ")}`);return{name:e.name}}):[],u={name:r.get("name"),description:r.get("description"),categoryId:r.get("categoryId"),image:r.get("image"),productTechs:l,productAddons:c,liveDemoLink:r.get("liveDemoLink"),gitHubLink:""===s||null===s?void 0:s};console.log(`${x} [${t}] Validation Input:`,u);let m=p().safeParse(u);if(!m.success){let e=m.error.flatten();return console.log(`${x} [${t}] Validation Errors:`,e),{status:400,message:"Invalid form data",error:Object.fromEntries(Object.entries(e.fieldErrors).map(([e,a])=>[e,a?.join(", ")||""])),formData:r}}let{name:g,description:f,categoryId:h,image:b,productTechs:w,productAddons:A,liveDemoLink:N,gitHubLink:j}=m.data;console.log(`${x} [${t}] Validated Data:`,{name:g,description:f,categoryId:h,liveDemoLink:N,gitHubLink:j,productTechs:w,productAddons:A});let T=await o._.product.findUnique({where:{id:e.productId}});if(!T)return console.error(`${x} [${t}] Product not found: ${e.productId}`),{status:404,message:"Product not found"};let S=T.image;b&&b.size>0&&(S=await y(b));let C=E({productTechs:w.map(e=>({name:e.name})),productAddons:A.map(e=>({name:e.name}))});if(C)return console.error(`${x} [${t}] Options validation failed: ${C.message}`),C;let I=await o._.$transaction(async a=>{let r=await a.product.update({where:{id:e.productId},data:{name:g,description:f,image:S,categoryId:h,liveDemoLink:N||null,gitHubLink:j||null}});return await a.productTech.deleteMany({where:{productId:e.productId}}),await a.productAddon.deleteMany({where:{productId:e.productId}}),await a.productTech.createMany({data:w.map(a=>({productId:e.productId,name:a.name}))}),await a.productAddon.createMany({data:A.map(a=>({productId:e.productId,name:a.name}))}),r});return console.log(`${x} [${t}] Product updated: ${I.id}`),await v(I.id),{status:200,message:"Product updated successfully"}}catch(e){return console.error(`${x} [${t}] Error:`,e),{status:500,message:`Failed to update product: ${e instanceof Error?e.message:"Unknown error"}`}}}let T=(0,t.j)("02d43f8f866c4dc6fb2fa57eabddf828e19e3352",S);async function S(e){let a=crypto.randomUUID();console.log(`${x} [${a}] Processing deleteProduct for ID: ${e}`);try{if(!await o._.product.findUnique({where:{id:e}}))return console.error(`${x} [${a}] Product not found: ${e}`),{status:404,message:"Product not found"};return await o._.product.delete({where:{id:e}}),console.log(`${x} [${a}] Product deleted: ${e}`),await v(e),{status:200,message:"Product deleted successfully"}}catch(e){return console.error(`${x} [${a}] Error:`,e),{status:500,message:`Failed to delete product: ${e instanceof Error?e.message:"Unknown error"}`}}}(0,f.h)([w,N,T]),(0,t.j)("7f51daf30bff5fcced803d170612a219fe14e5e8",w),(0,t.j)("e122618004fcbd4c5d1f8b16f5aab8b72c6b80d4",N),(0,t.j)("992f6e02786f05de85a8c14d55ab88f69938ef4e",T)},10911:(e,a,r)=>{"use strict";r.d(a,{ZP:()=>o});var t=r(68570);let o=(0,t.createProxy)(String.raw`C:\Users\raya\ShoppingCart\portfolio - Copy - Copy - Copy - Copy\src\app\admin\menu-items\_components\Form.tsx#default`);(0,t.createProxy)(String.raw`C:\Users\raya\ShoppingCart\portfolio - Copy - Copy - Copy - Copy\src\app\admin\menu-items\_components\Form.tsx#UploadImage`),(0,t.createProxy)(String.raw`C:\Users\raya\ShoppingCart\portfolio - Copy - Copy - Copy - Copy\src\app\admin\menu-items\_components\Form.tsx#FormActions`),(0,t.createProxy)(String.raw`C:\Users\raya\ShoppingCart\portfolio - Copy - Copy - Copy - Copy\src\app\admin\menu-items\_components\Form.tsx#AddProductTech`),(0,t.createProxy)(String.raw`C:\Users\raya\ShoppingCart\portfolio - Copy - Copy - Copy - Copy\src\app\admin\menu-items\_components\Form.tsx#AddProductAddons`)},56207:(e,a,r)=>{"use strict";r.d(a,{C:()=>i});var t=r(60281),o=r(13538);let i=(0,t.F)(async()=>{try{let e=await o._.category.findMany({select:{id:!0,name:!0,order:!0},orderBy:{order:"asc"}});return console.log("Fetched categories:",e),e}catch(e){return console.error("Error fetching categories:",e),[]}},["categories"],{revalidate:3600})},8316:(e,a,r)=>{"use strict";var t,o,i,n,d,s,l,c,u,m,p,g,f,h,x;r.d(a,{FA:()=>x,Z5:()=>n,i4:()=>h,iY:()=>d}),function(e){e.RTL="rtl",e.LTR="ltr"}(t||(t={})),function(e){e.ENGLISH="en",e.ARABIC="ar"}(o||(o={})),(i||(i={})).EN="en",function(e){e.ROOT="",e.MENU="menu",e.ABOUT="about",e.CONTACT="contact",e.AUTH="auth",e.CART="cart",e.PROFILE="profile",e.ADMIN="admin",e.PORTFOLIO="PORTFOLIO",e.SETTINGS="SETTINGS"}(n||(n={})),function(e){e.LOGIN="/signin",e.Register="/signup",e.FORGOT_PASSWORD="forgot-password",e.CATEGORIES="categories",e.MENU_ITEMS="menu-items",e.USERS="users",e.ORDERS="orders",e.NEW="new",e.EDIT="edit",e.DASHBOARD="Dashboard",e.CUSTOMERS="Customers",e.SALES="Sales",e.PRODUCTS="PRODUCTS",e.LOGOUT="LOGOUT"}(d||(d={})),function(e){e.TEXT="text",e.PASSWORD="password",e.EMAIL="email",e.NUMBER="number",e.DATE="date",e.TIME="time",e.DATETIME_LOCAL="datetime-local",e.RADIO="radio",e.SELECT="select",e.TEXTAREA="textarea",e.FILE="file",e.COLOR="color",e.CHECKBOX="checkbox",e.RANGE="range",e.TEL="tel",e.URL="url",e.SEARCH="search",e.SUBMIT="submit",e.WEEK="week",e.MULTI_SELECT="multi-select",e.HIDDEN="hidden",e.BUTTON="button"}(s||(s={})),function(e){e.NEXT="next",e.PREV="prev"}(l||(l={})),function(e){e.SUCCESS="success",e.ERROR="error",e.WARNING="warning",e.INFO="info"}(c||(c={})),function(e){e.ASC="asc",e.DESC="desc"}(u||(u={})),function(e){e.NAME="name",e.CREATED_AT="created_at",e.UPDATED_AT="updated_at",e.EMAIL="email",e.PHONE="phone",e.STATUS="status",e.STATUS_DATE="status_date",e.END_DATE="end_date"}(m||(m={})),function(e){e.LOGIN_SUCCESS="login_success",e.LOGOUT_SUCCESS="logout_success",e.REGISTER_SUCCESS="register_success",e.FORGOT_PASSWORD="forgot_password",e.RESET_PASSWORD="reset_password",e.CHECK_EMAIL="check_email",e.VERIFY_EMAIL="verify_email"}(p||(p={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(g||(g={})),function(e){e.PROD="production",e.DEV="development"}(f||(f={})),function(e){e.ADMIN="ADMIN",e.USER="USER"}(h||(h={})),function(e){e.FullStack="FullStack",e.Backend="Backend",e.Frontend="Frontend",e.UI="UI",e.UX="UX"}(x||(x={}))},96690:(e,a,r)=>{"use strict";var t,o,i,n,d,s,l,c,u,m,p,g,f,h,x;r.d(a,{CQ:()=>f,Z5:()=>n,iY:()=>d,lI:()=>o}),function(e){e.RTL="rtl",e.LTR="ltr"}(t||(t={})),function(e){e.ENGLISH="en",e.ARABIC="ar"}(o||(o={})),(i||(i={})).EN="en",function(e){e.ROOT="",e.MENU="menu",e.ABOUT="about",e.CONTACT="contact",e.AUTH="auth",e.CART="cart",e.PROFILE="profile",e.ADMIN="admin",e.PORTFOLIO="PORTFOLIO",e.SETTINGS="SETTINGS"}(n||(n={})),function(e){e.LOGIN="/signin",e.Register="/signup",e.FORGOT_PASSWORD="forgot-password",e.CATEGORIES="categories",e.MENU_ITEMS="menu-items",e.USERS="users",e.ORDERS="orders",e.NEW="new",e.EDIT="edit",e.DASHBOARD="Dashboard",e.CUSTOMERS="Customers",e.SALES="Sales",e.PRODUCTS="PRODUCTS",e.LOGOUT="LOGOUT"}(d||(d={})),function(e){e.TEXT="text",e.PASSWORD="password",e.EMAIL="email",e.NUMBER="number",e.DATE="date",e.TIME="time",e.DATETIME_LOCAL="datetime-local",e.RADIO="radio",e.SELECT="select",e.TEXTAREA="textarea",e.FILE="file",e.COLOR="color",e.CHECKBOX="checkbox",e.RANGE="range",e.TEL="tel",e.URL="url",e.SEARCH="search",e.SUBMIT="submit",e.WEEK="week",e.MULTI_SELECT="multi-select",e.HIDDEN="hidden",e.BUTTON="button"}(s||(s={})),function(e){e.NEXT="next",e.PREV="prev"}(l||(l={})),function(e){e.SUCCESS="success",e.ERROR="error",e.WARNING="warning",e.INFO="info"}(c||(c={})),function(e){e.ASC="asc",e.DESC="desc"}(u||(u={})),function(e){e.NAME="name",e.CREATED_AT="created_at",e.UPDATED_AT="updated_at",e.EMAIL="email",e.PHONE="phone",e.STATUS="status",e.STATUS_DATE="status_date",e.END_DATE="end_date"}(m||(m={})),function(e){e.LOGIN_SUCCESS="login_success",e.LOGOUT_SUCCESS="logout_success",e.REGISTER_SUCCESS="register_success",e.FORGOT_PASSWORD="forgot_password",e.RESET_PASSWORD="reset_password",e.CHECK_EMAIL="check_email",e.VERIFY_EMAIL="verify_email"}(p||(p={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(g||(g={})),function(e){e.PROD="production",e.DEV="development"}(f||(f={})),function(e){e.ADMIN="ADMIN",e.USER="USER"}(h||(h={})),function(e){e.FullStack="FullStack",e.Backend="Backend",e.Frontend="Frontend",e.UI="UI",e.UX="UX"}(x||(x={}))},60281:(e,a,r)=>{"use strict";r.d(a,{F:()=>i});var t=r(57708),o=r(71159);function i(e,a,r){return(0,t.unstable_cache)((0,o.cache)(e),a,r)}},24831:(e,a,r)=>{"use strict";r.d(a,{_:()=>o});var t=r(53524);let o=global.prisma||new t.PrismaClient}};