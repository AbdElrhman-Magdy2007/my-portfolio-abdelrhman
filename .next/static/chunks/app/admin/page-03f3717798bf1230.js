(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3,4178,2790],{3610:function(e,t,a){Promise.resolve().then(a.bind(a,51006))},53581:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(39763).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},33145:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var i=a(48461),l=a.n(i)},48461:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return s},getImageProps:function(){return o}});let i=a(47043),l=a(55346),n=a(65878),r=i._(a(5084));function o(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let s=n.Image},25523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return i}});let i=a(47043)._(a(2265)).default.createContext(null)},51006:function(e,t,a){"use strict";a.d(t,{default:function(){return y}});var i,l,n=a(57437),r=a(43209),o=a(94279),s=a(33145),d=a(12381),u=a(2265);a(83079);var c=(0,a(12119).$)("911a95d22ddf42fb47f6d26d36fb01daa091dd52"),f=a(15001),m=a(53581),g=a(14438),p=a(80605),b=a(90593),v=a(9270),h=a(69653),x=a(61994);(i=l||(l={})).USER="USER",i.ADMIN="ADMIN";var y=function(e){var t,a;let{user:i}=e,{data:l,update:m}=(0,p.useSession)(),[y,N]=(0,u.useState)(null!==(t=i.image)&&void 0!==t?t:""),[w,S]=(0,u.useState)("ADMIN"===i.role),[k,E]=(0,u.useState)(null),[A,C]=(0,u.useState)([]),_=(0,u.useCallback)(()=>{let e=new FormData;return Object.entries(i).forEach(t=>{let[a,i]=t;null!=i&&"image"!==a&&e.append(a,i.toString())}),e},[i]),D={message:"",error:{},status:null,formData:_()},[I,Z,O]=(0,u.useActionState)(c.bind(null,w),D),{getFormFields:M}=(0,o.Z)({slug:r.Z5.PROFILE});(0,u.useEffect)(()=>{if(I.message&&"number"==typeof I.status&&!O&&I.message!==k){g.Am.dismiss("profile-update-loading");let e=200===I.status;g.Am[e?"success":"error"](I.message,{style:{color:e?"#34c759":"#ef4444",backgroundColor:e?"#f0fdf4":"#fef2f2",border:"1px solid ".concat(e?"#dcfce7":"#fee2e2"),borderRadius:"8px",padding:"12px"},duration:3e3}),E(I.message),e&&m({...l,user:{...null==l?void 0:l.user,role:w?"ADMIN":"USER",image:y}})}},[O,I.message,I.status,l,m,w,y,k]),(0,u.useEffect)(()=>{var e;N(null!==(e=i.image)&&void 0!==e?e:"")},[i.image]);let P=(0,u.useCallback)(e=>{e.preventDefault();let t="Saving...";t!==k&&(g.Am.loading(t,{id:"profile-update-loading",style:{borderRadius:"8px",padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb"}}),E(t)),(0,u.startTransition)(()=>{Z(new FormData(e.currentTarget))})},[Z,k]);return(0,n.jsxs)(h.E.form,{onSubmit:P,className:"flex flex-col md:flex-row gap-10 p-6 bg-black shadow-lg rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,n.jsxs)(h.E.div,{className:"group relative w-[200px] h-[200px] overflow-hidden rounded-full mx-auto border-2 border-indigo-700",whileHover:{scale:1.05},children:[y?(0,n.jsx)(s.default,{src:y,alt:null!==(a=i.name)&&void 0!==a?a:"User Avatar",width:200,height:200,className:"rounded-full object-cover"}):(0,n.jsx)(s.default,{src:"https://i.postimg.cc/kg2xytVs/610e8961bbb935274c005c6106a78a38.jpg",alt:"Default Cat Avatar",width:200,height:200,className:"rounded-full object-cover"}),(0,n.jsx)("div",{className:(0,x.Z)("absolute top-0 left-0 w-full h-full flex items-center justify-center rounded-full transition-opacity duration-200",y&&"group-hover:opacity-100 opacity-0 transition-opacity duration-200"),children:(0,n.jsx)(j,{setSelectedImage:N})})]}),(0,n.jsxs)(h.E.div,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[M().map(e=>{var t,a,i,l,o,s;let d=null!==(l=null==I?void 0:null===(t=I.formData)||void 0===t?void 0:t.get(e.name))&&void 0!==l?l:_().get(e.name);return(0,n.jsx)(h.E.div,{className:"mb-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,n.jsx)(b.Z,{...e,type:e.type,pattern:null!==(o=e.pattern)&&void 0!==o?o:"",ariaLabel:null!==(s=e.ariaLabel)&&void 0!==s?s:"",defaultValue:d,error:null==I?void 0:null===(i=I.error)||void 0===i?void 0:null===(a=i[e.name])||void 0===a?void 0:a.join(", "),readonly:e.type===r.oP.EMAIL,disabled:O})},e.name)}),(null==l?void 0:l.user.role)==="ADMIN"&&(0,n.jsxs)(h.E.div,{className:"flex items-center gap-2 my-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[(0,n.jsx)(v.XZ,{id:"admin",name:"admin",checked:w,onCheckedChange:e=>S(e),className:(0,x.Z)("w-5 h-5 border-2 rounded-md transition-all",w?"bg-indigo-700 border-indigo-700":"bg-black border-black")}),(0,n.jsx)("label",{htmlFor:"admin",className:"text-indigo-700 font-medium cursor-pointer",children:"Admin"})]}),(0,n.jsx)(h.E.div,{initial:{scale:.9},animate:{scale:1},transition:{duration:.3},children:(0,n.jsx)(d.z,{type:"submit",disabled:O,className:(0,x.Z)("w-full bg-indigo-700 hover:bg-indigo-700 text-black font-bold py-2 px-4 rounded-lg transition-all",O&&"opacity-50 cursor-not-allowed flex items-center justify-center gap-2"),children:O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"Saving..."})]}):"Save"})})]})]})};let j=e=>{let{setSelectedImage:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"image-upload",onChange:e=>{var a;let i=null===(a=e.target.files)||void 0===a?void 0:a[0];i&&t(URL.createObjectURL(i))},name:"image"}),(0,n.jsx)("label",{htmlFor:"image-upload",className:"flex justify-center items-center w-full h-full cursor-pointer ml-1 rounded-full hover:bg-indigo-700/700 transition-all",children:(0,n.jsx)(m.Z,{className:"w-10 h-10 text-indigo-700"})})]})}}},function(e){e.O(0,[5569,9653,4438,5081,6307,5878,7218,2971,2117,1744],function(){return e(e.s=3610)}),_N_E=e.O()}]);