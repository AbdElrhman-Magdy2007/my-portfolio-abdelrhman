(()=>{var e={};e.id=259,e.ids=[259],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10974:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var o=t(75986),a=t(8974);function n(...e){return(0,a.QP)((0,o.$)(e))}},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21793:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d});var o=t(65239),a=t(48088),n=t(88170),i=t.n(n),s=t(30893),c={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>s[e]);t.d(r,c);let d={children:["",{children:["admin",{children:["menu-items",{children:["[productId]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,45984)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\admin\\menu-items\\[productId]\\edit\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,22558)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\admin\\menu-items\\[productId]\\edit\\layout.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,25108)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,54413)),"C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["C:\\Users\\raya\\ShoppingCart\\portfolio - Copy - Copy - Copy - Copy\\src\\app\\admin\\menu-items\\[productId]\\edit\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/menu-items/[productId]/edit/page",pathname:"/admin/menu-items/[productId]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22558:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a,dynamic:()=>o});let o="force-dynamic";function a({children:e}){return e}},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},45984:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>L,generateStaticParams:()=>O});var o=t(37413),a=t(67218);t(79130);var n=t(61120),i=t(84113),s=t(31183),c=t(58111),d=t(54348),l=t(4536),u=t.n(l),p=t(39916),m=t(23732),f=t(83204),g=t(10974);let h=n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("div",{ref:t,className:(0,g.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));h.displayName="Card";let y=n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("div",{ref:t,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",e),...r}));y.displayName="CardHeader";let x=n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("h3",{ref:t,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));x.displayName="CardTitle",n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("p",{ref:t,className:(0,g.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let E=n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("div",{ref:t,className:(0,g.cn)("p-6 pt-0",e),...r}));E.displayName="CardContent",n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("div",{ref:t,className:(0,g.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter";let I=(0,t(50662).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),C=n.forwardRef(({className:e,variant:r,...t},a)=>(0,o.jsx)("div",{ref:a,role:"alert",className:(0,g.cn)(I({variant:r}),e),...t}));C.displayName="Alert";let N=n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("h5",{ref:t,className:(0,g.cn)("mb-1 font-medium leading-none tracking-tight",e),...r}));N.displayName="AlertTitle";let v=n.forwardRef(({className:e,...r},t)=>(0,o.jsx)("div",{ref:t,className:(0,g.cn)("text-sm [&_p]:leading-relaxed",e),...r}));v.displayName="AlertDescription";var b=t(65867),_=t(75986),A=t(17478);let D="[EditProductPage]",$={INVALID_ID:"Invalid product ID provided",PRODUCT_NOT_FOUND:"Product not found",NO_CATEGORIES:"No categories available. Please create a category first."},T=()=>(0,i.A)(),S=(0,n.cache)(async()=>{let e=T();console.log(`${D} [${e}] Fetching products`);try{let r=await (0,f.d$)();if("error"in r||!Array.isArray(r))return console.error(`${D} [${e}] Failed to fetch products:`,r?.error),[];return r}catch(r){return console.error(`${D} [${e}] Error fetching products:`,r),[]}}),w=(0,n.cache)(async()=>{let e=T();console.log(`${D} [${e}] Fetching categories`);try{let r=await (0,m.b)();if("error"in r||!Array.isArray(r))return console.error(`${D} [${e}] Failed to fetch categories:`,r?.error),[];return r}catch(r){return console.error(`${D} [${e}] Error fetching categories:`,r),[]}});async function O(){let e=T();console.log(`${D} [${e}] Generating static params`);try{return(await S()).map(e=>({productId:e.id}))}catch(r){return console.error(`${D} [${e}] Error in generateStaticParams:`,r),[]}}let F=(0,n.cache)(async e=>{let r=T();if(console.log(`${D} [${r}] Fetching product ID: ${e}`),!e||"string"!=typeof e)return console.warn(`${D} [${r}] ${$.INVALID_ID}`),null;try{let t=await s.z.product.findUnique({where:{id:e},include:{ProductTech:{select:{id:!0,name:!0}},ProductAddon:{select:{id:!0,name:!0}},category:{select:{id:!0,name:!0,order:!0}},orders:{select:{id:!0}},downloadVerifications:{select:{id:!0}}}});return t||console.warn(`${D} [${r}] ${$.PRODUCT_NOT_FOUND}`),t}catch(e){return console.error(`${D} [${r}] Error fetching product:`,e),null}});async function L({params:e}){let r=T(),{productId:t}=await e;t&&"string"==typeof t||(console.error(`${D} [${r}] ${$.INVALID_ID}`),(0,p.notFound)());let[a,i]=await Promise.all([F(t),w()]);return(a||(console.error(`${D} [${r}] ${$.PRODUCT_NOT_FOUND}`),(0,p.notFound)()),i&&0!==i.length)?(0,o.jsxs)("main",{className:(0,_.A)("min-h-screen bg-gradient-to-b from-slate-900 to-indigo-950","relative overflow-hidden py-12 px-4 sm:px-6 lg:px-8"),dir:"auto",children:[(0,o.jsxs)("div",{className:"particle-wave pointer-events-none",children:[(0,o.jsx)("div",{className:"particle",style:{width:"8px",height:"8px",top:"20%",left:"15%",animationDuration:"3s",animationDelay:"0.3s"}}),(0,o.jsx)("div",{className:"particle",style:{width:"6px",height:"6px",top:"70%",left:"80%",animationDuration:"2.5s",animationDelay:"0.8s"}})]}),(0,o.jsx)(n.Suspense,{fallback:(0,o.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,o.jsx)(b.A,{className:"w-8 h-8 text-indigo-200 animate-spin"})}),children:(0,o.jsx)("section",{className:"max-w-5xl mx-auto",children:(0,o.jsxs)(h,{className:(0,_.A)("glass-card bg-slate-800/30 border-indigo-600/30 shadow-lg","rounded-xl animate-reveal-text delay-200"),children:[(0,o.jsx)(y,{children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)(x,{className:(0,_.A)("text-3xl font-bold text-indigo-200","text-gradient-primary animate-glow"),children:["Edit Product: ",a.name]}),(0,o.jsx)(u(),{href:`/${c.BV.ADMIN}/${c.bQ.MENU_ITEMS}`,className:(0,_.A)("btn-secondary text-indigo-100 font-semibold","hover:text-indigo-50 transition-colors duration-300"),"aria-label":"Return to menu items",children:"Back to Menu Items"})]})}),(0,o.jsx)(E,{children:(0,o.jsx)(d.default,{product:a,categories:i})})]})})})]}):(console.error(`${D} [${r}] ${$.NO_CATEGORIES}`),(0,o.jsxs)("main",{className:(0,_.A)("min-h-screen bg-gradient-to-b from-slate-900 to-indigo-950","relative overflow-hidden flex items-center justify-center p-6"),dir:"auto",children:[(0,o.jsxs)("div",{className:"particle-wave pointer-events-none",children:[(0,o.jsx)("div",{className:"particle",style:{width:"8px",height:"8px",top:"20%",left:"15%",animationDuration:"3s",animationDelay:"0.3s"}}),(0,o.jsx)("div",{className:"particle",style:{width:"6px",height:"6px",top:"70%",left:"80%",animationDuration:"2.5s",animationDelay:"0.8s"}})]}),(0,o.jsxs)(C,{variant:"destructive",className:(0,_.A)("max-w-md glass-card border-indigo-600/30 bg-slate-800/30","animate-reveal-text delay-200"),children:[(0,o.jsx)(N,{className:(0,_.A)("text-indigo-200 text-2xl font-bold","text-gradient-primary animate-glow"),children:"No Categories Available"}),(0,o.jsx)(v,{className:"text-red-400 text-lg",children:$.NO_CATEGORIES}),(0,o.jsx)(u(),{href:`/${c.BV.ADMIN}/${c.bQ.CATEGORIES}`,className:(0,_.A)("mt-4 inline-block btn-secondary text-indigo-100 font-semibold","hover:text-indigo-50 transition-colors duration-300"),"aria-label":"Navigate to categories management",children:"Go to Categories"})]})]}))}(0,A.D)([O,L]),(0,a.A)(O,"00ae22c953490ac2480aa91671f23666306c105010",null),(0,a.A)(L,"40c922563a872fd6f809e2ed603bae2ffdf2f6e793",null)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64883:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,85814,23)),Promise.resolve().then(t.bind(t,11923))},65867:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});let o=(0,t(18618).A)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},66866:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"00ae22c953490ac2480aa91671f23666306c105010":()=>a.generateStaticParams,"40a4b3531ce78691a7b5100c2cc76b5387ed63c157":()=>o.default,"40c922563a872fd6f809e2ed603bae2ffdf2f6e793":()=>a.default,"7f2e1b1c83a8cbd78ca45a961964d6cef53d9f8a94":()=>n.ab,"7f352130d86087948269d769ff33a5917d586408fe":()=>n.d$,"7f76c8a9b05d1631dc0b6df7d181ea6b64cf99259f":()=>n.OF,"7f8dd6a67c0d7ae542533fdc7e66c680d79eb7113b":()=>n.hx,"7fc492213171b64e082270f46e8ac5370cae9ad0e0":()=>n.vu,"7fec2ee5f780f6c552c2b01b5f85c2703afc266f1e":()=>n.AS});var o=t(25108),a=t(45984),n=t(83204)},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83204:(e,r,t)=>{"use strict";t.d(r,{AS:()=>h,OF:()=>x,ab:()=>I,d$:()=>y,hx:()=>E,vu:()=>C});var o=t(67218);t(79130);var a=t(61120),n=t(84113),i=t(31183),s=t(62351),c=t(17478);let d="[Products]",l="name",u={INVALID_PAGE:"Page number must be positive",INVALID_LIMIT:"Limit must be non-negative",INVALID_CATEGORY_ID:"Category ID is required",NO_PRODUCTS:"No products found",NO_BEST_SELLERS:"No best-selling products found",NO_CATEGORIES:"No categories found",FETCH_FAILED:"Failed to fetch data"},p=()=>(0,n.A)(),m={category:{select:{id:!0,name:!0,order:!0}},ProductTech:{select:{id:!0,name:!0,productId:!0}},ProductAddon:{select:{id:!0,name:!0,productId:!0}},orders:{select:{id:!0,quantity:!0,productId:!0,orderId:!0}},downloadVerifications:{select:{id:!0}}},f=e=>{if(!e)return!1;try{return new URL(e),!e.includes("/admin/")}catch{return!1}},g=e=>e.replace(/[ممممممممتتتdggfjgjgh]+/g,"").trim()||"Unnamed Category",h=(0,a.cache)(async()=>{let e=p();console.log(`${d} [${e}] Fetching all products`);try{let r=await i.z.product.findMany({include:m,orderBy:{name:"asc"}});return console.log(`${d} [${e}]`,{action:"FETCH_ALL",count:r.length,cache:r.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),r.length>0?r:{error:u.NO_PRODUCTS,code:"NO_PRODUCTS",details:"The database contains no products"}}catch(r){return console.error(`${d} [${e}] Error fetching products:`,r),{error:u.FETCH_FAILED,code:r instanceof Error&&r.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:r instanceof Error?r.message:String(r)}}}),y=(0,a.cache)(async(e={})=>{let r=p();console.log(`${d} [${r}] Fetching products with options:`,e);try{let{page:t=1,limit:o=0,search:a,sortBy:n=l,order:s="asc"}=e;if(t<1)throw Error(u.INVALID_PAGE);if(o<0)throw Error(u.INVALID_LIMIT);let c=a?.trim(),p=await i.z.product.findMany({where:{name:c?{contains:c,mode:"insensitive"}:void 0},include:m,orderBy:{[n]:s},skip:o>0?(t-1)*o:0,take:o>0?o:void 0});return console.log(`${d} [${r}]`,{action:"FETCH_FILTERED",count:p.length,options:e,cache:p.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),p.length>0?p:{error:u.NO_PRODUCTS,code:"NO_PRODUCTS",details:"No products match the provided criteria"}}catch(e){return console.error(`${d} [${r}] Error fetching products:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}}),x=(0,a.cache)(async(e={})=>{let r=p();console.log(`${d} [${r}] Counting products with search:`,e.search);try{let t=e.search?.trim(),o=await i.z.product.count({where:{name:t?{contains:t,mode:"insensitive"}:void 0}});return console.log(`${d} [${r}]`,{action:"COUNT",count:o,cache:o>0?"MISS":"HIT",timestamp:new Date().toISOString()}),o}catch(e){return console.error(`${d} [${r}] Error counting products:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}}),E=(0,a.cache)(async e=>{let r=p();console.log(`${d} [${r}] Fetching best sellers with limit:`,e);try{if(e&&e<1)throw Error(u.INVALID_LIMIT);let t=await i.z.product.findMany({where:{orders:{some:{}}},orderBy:{orders:{_count:"desc"}},include:m,take:e});return console.log(`${d} [${r}]`,{action:"FETCH_BEST_SELLERS",count:t.length,cache:t.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),t.length>0?t:{error:u.NO_BEST_SELLERS,code:"NO_BEST_SELLERS",details:"No products with orders exist"}}catch(e){return console.error(`${d} [${r}] Error fetching best sellers:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}}),I=(0,a.cache)(async()=>{let e=p();console.log(`${d} [${e}] Fetching categories with products`);try{let r=(await i.z.category.findMany({include:{products:{include:m,orderBy:{name:"asc"}}},orderBy:{order:"asc"}})).map(e=>({...e,name:g(e.name),products:e.products}));return r.forEach(r=>{console.log(`${d} [${e}] Category: ${r.name}`,{categoryId:r.id,productCount:r.products.length,products:r.products.map(e=>({id:e.id,name:e.name,liveDemoLink:e.liveDemoLink,gitHubLink:e.gitHubLink,validLiveDemo:f(e.liveDemoLink),validGitHub:f(e.gitHubLink),addons:e.ProductAddon?.map(e=>e.name)||[],techs:e.ProductTech?.map(e=>e.name)||[]}))})}),console.log(`${d} [${e}]`,{action:"FETCH_CATEGORIES",categoryCount:r.length,productCount:r.reduce((e,r)=>e+r.products.length,0),cache:r.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),(0,s.revalidatePath)("/projects"),r.length>0?r:{error:u.NO_CATEGORIES,code:"NO_CATEGORIES",details:"The database contains no categories"}}catch(r){return console.error(`${d} [${e}] Error fetching categories:`,r),{error:u.FETCH_FAILED,code:r instanceof Error&&r.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:r instanceof Error?r.message:String(r)}}}),C=(0,a.cache)(async(e,r={})=>{let t=p();console.log(`${d} [${t}] Fetching products for category ID: ${e}`);try{if(!e)throw Error(u.INVALID_CATEGORY_ID);let{page:o=1,limit:a=0,search:n,sortBy:s=l,order:c="asc"}=r;if(o<1)throw Error(u.INVALID_PAGE);if(a<0)throw Error(u.INVALID_LIMIT);let p=n?.trim(),f=await i.z.product.findMany({where:{categoryId:e,name:p?{contains:p,mode:"insensitive"}:void 0},include:m,orderBy:{[s]:c},skip:a>0?(o-1)*a:0,take:a>0?a:void 0});return console.log(`${d} [${t}]`,{action:"FETCH_BY_CATEGORY",categoryId:e,count:f.length,options:r,cache:f.length>0?"MISS":"HIT",timestamp:new Date().toISOString()}),f.length>0?f:{error:u.NO_PRODUCTS,code:"NO_PRODUCTS",details:`No products found for category ID ${e}`}}catch(e){return console.error(`${d} [${t}] Error fetching products by category:`,e),{error:u.FETCH_FAILED,code:e instanceof Error&&e.message.includes("connection")?"DB_CONNECTION_FAILED":"FETCH_FAILED",details:e instanceof Error?e.message:String(e)}}});(0,c.D)([h,y,x,E,I,C]),(0,o.A)(h,"7fec2ee5f780f6c552c2b01b5f85c2703afc266f1e",null),(0,o.A)(y,"7f352130d86087948269d769ff33a5917d586408fe",null),(0,o.A)(x,"7f76c8a9b05d1631dc0b6df7d181ea6b64cf99259f",null),(0,o.A)(E,"7f8dd6a67c0d7ae542533fdc7e66c680d79eb7113b",null),(0,o.A)(I,"7f2e1b1c83a8cbd78ca45a961964d6cef53d9f8a94",null),(0,o.A)(C,"7fc492213171b64e082270f46e8ac5370cae9ad0e0",null)},88443:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,4536,23)),Promise.resolve().then(t.bind(t,54348))},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[243,915,78,257,802,332,760,533,615,997,274,397,357,494,74],()=>t(21793));module.exports=o})();